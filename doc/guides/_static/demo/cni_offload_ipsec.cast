{"version": 2, "width": 126, "height": 38, "timestamp": 1745824333, "env": {"SHELL": "/bin/bash", "TERM": "xterm"}}
[0.064483, "o", "\u001b]0;root@master: /usr/lib/go-1.23/src/cni-offload\u0007root@master:/usr/lib/go-1.23/src/cni-offload# "]
[1.33341, "o", "\u001b[H\u001b[2J\u001b]0;root@master: /usr/lib/go-1.23/src/cni-offload\u0007root@master:/usr/lib/go-1.23/src/cni-offload# "]
[3.968647, "o", "t"]
[4.090287, "o", "m"]
[4.403531, "o", "u"]
[4.629749, "o", "x"]
[5.370715, "o", "\r\n"]
[5.480403, "o", "\u001b[?1049h\u001b[22;0;0t\u001b[?1h\u001b=\u001b[H\u001b[2J\u001b[?12l\u001b[?25h\u001b[?1000l\u001b[?1002l\u001b[?1006l\u001b[?1005l\u001b[c\u001b(B\u001b[m\u001b[?12;25h\u001b[?12l\u001b[?25h\u001b[?1003l\u001b[?1006l\u001b[?2004l\u001b[1;1H\u001b[1;38r\u001b]112\u0007\u001b[1;1H"]
[5.480731, "o", "\u001b[?25l\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:bash*                                                                                           \"master\" 12:42 28-Apr-25\u001b(B\u001b[m\u001b[1;1H\u001b[?12l\u001b[?25h\u001b(B\u001b[m\u001b[?12;25h\u001b[?12l\u001b[?25h\u001b[?1003l\u001b[?1006l\u001b[?2004l\u001b[1;1H\u001b[1;38r"]
[5.481003, "o", "\u001b[?25l\u001b[1;1H\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:bash*                                                                                           \"master\" 12:42 28-Apr-25\u001b(B\u001b[m\u001b[1;1H\u001b[?12l\u001b[?25h"]
[5.561943, "o", "-bash: /root/.bash_profile: line 3: unexpected EOF while looking for matching `\"'\r\n-bash: /root/.bash_profile: line 5: syntax error: unexpected end of file\r\n"]
[5.56236, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[7.761167, "o", "\u001b[?25l\u001b[H\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:bash- 1:bash*                                                                                   \"master\" 12:42 28-Apr-25\u001b(B\u001b[m\u001b[1;1H\u001b[?12l\u001b[?25h"]
[7.789718, "o", "-bash: /root/.bash_profile: line 3: unexpected EOF while looking for matching `\"'\r\n-bash: /root/.bash_profile: line 5: syntax error: unexpected end of file\r\n"]
[7.790072, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[8.806175, "o", "\u001b[?25l\u001b[H\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:bash  1:bash- 2:bash*                                                                           \"master\" 12:42 28-Apr-25\u001b(B\u001b[m\u001b[1;1H\u001b[?12l\u001b[?25h"]
[8.830743, "o", "-bash: /root/.bash_profile: line 3: unexpected EOF while looking for matching `\"'\r\n-bash: /root/.bash_profile: line 5: syntax error: unexpected end of file\r\n"]
[8.831223, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[11.137646, "o", "\u001b[?25l\u001b[H-bash: /root/.bash_profile: line 3: unexpected EOF while looking for matching `\"'\u001b[K\r\n-bash: /root/.bash_profile: line 5: syntax error: unexpected end of file\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:bash* 1:bash  2:bash-                                                                           \"master\" 12:42 28-Apr-25\u001b(B\u001b[m\u001b[3;47H\u001b[?12l\u001b[?25h"]
[12.66596, "o", "\u001b[1;37r\u001b[2;37r\u001b[36S\u001b[1;1H\u001b[Kroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[1;38r\u001b[1;47H"]
[14.324625, "o", "v"]
[14.442119, "o", "i"]
[14.680938, "o", " "]
[15.113628, "o", "R"]
[15.344139, "o", "E"]
[15.657821, "o", "ADME.md "]
[16.32994, "o", "\r\n"]
[16.331752, "o", "\u001b[?25l\u001b[H\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[2d\u001b[?12l\u001b[?25h"]
[16.332028, "o", "\u001b[1;37r\u001b[2;37r\u001b[36S\u001b[1;1H\u001b[K\u001b[37d\"README.md\"\u001b[1;38r\u001b[37;12H\u001b[?25l"]
[16.332111, "o", " 201L, 8414C"]
[16.332363, "o", "\u001b[H# CNI-Offload Solution\u001b[3;1H## Introduction\u001b[5;1HKubernetes networking is handled outside of Kubernetes core, this is based on standardized framework called Container network  \rinterface (CNI). There are many CNIs available with varying adoption rates in the market. The most popular one is Cilium CNI,  \rthis is used very widely including even all the hyper-scalers. We have created a solution to offload it completely to Marvell  \rDPU. The solution is architected in a way such that it can be adopted to offload other CNIs to the DPU. It is done without chaa\rnging Kubernetes and created a working PoC with Cilium as the offloaded CNI.\u001b[11;1H### Components\u001b[13;1H![Components of CNI-Offload Solution](deployments/images/cni-offload-components-3.png)\u001b[15;1H#### On Host\u001b[17;1H- **cni-offload-host**: A host-side daemonset that performs initialization tasks on the host, such as placing offload-cni in ``\r/opt/cni/bin` and the configuration file in `/etc/cni/net.d/`, then goes to sleep.\r\n- **offload-cni**: A CNI Plugin "]
[16.332446, "o", "binary on the host that listens to all container networking of pods running on the host and see\rnds the events down to the DPU via gRPC API.\u001b[22;1H#### On DPU\u001b[24;1H- **cni-offload-agent**: A daemonset running on each DPU which contains a gRPC Server to listen to host-side calls for each poo\rd creation on the host.\r\n- **Offload-Cilium-CNI**: A CNI plugin binary on the DPU called from cni-offload-agent for add/del/check calls for the pod on  \rthe host coming via gRPC.\u001b[29;1H## Installation Steps\u001b[31;1H### Prerequisites\u001b[33;1H- System should satisfy the criteria for running a Kubernetes cluster.\r\n- Software packages:\r\n  - Server with Ubuntu 20.04 or later.\r\n  - CN106-PCIe card with Ubuntu 20.04 or later with the required driver installed.\u001b[H\u001b[?12l\u001b[?25h"]
[16.877525, "o", "\u001b[?25l\u001b[30m\u001b[42m\u001b[38d[1] 0:vi* 1:bash  2:bash-                                                                             \"master\" 12:42 28-Apr-25\u001b(B\u001b[m\u001b[1;1H\u001b[?12l\u001b[?25h"]
[16.878474, "o", "\u001b[1;37r\u001b[2;37r\u001b[36S\u001b[1;1H\u001b[K![CNI-Offload policies](deployments/images/cni-offload-policies.png)\u001b[3;1H```Application running demo```\u001b[5;1H[<img src=\"deployments/images/cni-offload-nodes.png\" style=\"width:400px;\"/>](doc/guides/_static/demo/CNI_Offload.html)\u001b[7;1H#### Testing IPsec Transparent Encryption\u001b[9;1HOn Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\r\necho 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[12;1H# Deploy Cilium with IPSec\r\n1. make deploy-ipsec\u001b[15;1H# Check encryption status\r\n2. cilium encrypt status\u001b[18;1H# Start tcpdump in dpu\r\n3. ssh root@<dpu-ip> tcpdump -i eth0\u001b[21;1H# Create starwars demo\r\n4. kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml\u001b[24;1H# Post http request to create traffic\r\n5. kubectl exec xwing -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\u001b[27;1H# Check tcpdump for ESP packet\r\n16:10:30.388280 IP (tos 0x0, ttl 64, id 50931, offset 0, flags [none], proto UDP (17), length 1498)\r\n    10.29.45.6.58"]
[16.878538, "o", "060 > 10.29.45.83.8472: [no cksum] OTV, flags [I] (0x08), overlay 0, instance 29048\r\nIP (tos 0x0, ttl 64, id 5, offset 0, flags [DF], proto ESP (50), length 1448)\r\n    10.0.3.208 > 10.0.4.145: ESP(spi=0x00000006,seq=0x2e83614), length 1428\u001b[33;1H# Check CPT instruction counter\r\n6. cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[36;1HCPT instruction requests   45\u001b[1;38r\u001b[36;1H"]
[24.088389, "o", "\u001b[?25l\u001b[H-bash: /root/.bash_profile: line 3: unexpected EOF while looking for matching `\"'\u001b[K\r\n-bash: /root/.bash_profile: line 5: syntax error: unexpected end of file\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash* 2:bash                                                                              \"master\" 12:42 28-Apr-25\u001b(B\u001b[m\u001b[3;47H\u001b[?12l\u001b[?25h"]
[25.579842, "o", "\u001b[1;37r\u001b[2;37r\u001b[36S\u001b[1;1H\u001b[Kroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[1;38r\u001b[1;47H"]
[26.038217, "o", "\r\n"]
[26.038281, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[26.272007, "o", "\r\n"]
[26.272282, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[26.991, "o", "# Testing IPsec Transparent Encryption"]
[27.770132, "o", "\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# "]
[28.013963, "o", "\r\n"]
[28.014194, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[28.386995, "o", "\r\n"]
[28.387183, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[33.364806, "o", "\u001b[?25l\u001b[H![CNI-Offload policies](deployments/images/cni-offload-policies.png)\u001b[K\r\n\u001b[K\r\n```Application running demo```\u001b[K\r\n\u001b[K\r\n[<img src=\"deployments/images/cni-offload-nodes.png\" style=\"width:400px;\"/>](doc/guides/_static/demo/CNI_Offload.html)\u001b[K\r\n\u001b[K\r\n#### Testing IPsec Transparent Encryption\u001b[K\r\n\u001b[K\r\nOn Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\necho 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[K\r\n\u001b[K\r\n# Deploy Cilium with IPSec\u001b[K\r\n1. make deploy-ipsec\u001b[K\r\n\u001b[K\r\n# Check encryption status\u001b[K\r\n2. cilium encrypt status\u001b[K\r\n\u001b[K\r\n# Start tcpdump in dpu\u001b[K\r\n3. ssh root@<dpu-ip> tcpdump -i eth0\u001b[K\r\n\u001b[K\r\n# Create starwars demo\u001b[K\r\n4. kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml\u001b[K\r\n\u001b[K\r\n# Post http request to create traffic\u001b[K\r\n5. kubectl exec xwing -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\u001b[K\r\n\u001b[K\r\n# Check tcpdump for ESP packet\u001b[K\r\n16:10:30.388280 IP (tos 0x0, ttl 64, id 50931, offset 0, flags [none], proto UDP ("]
[33.364874, "o", "17), length 1498)\u001b[K\r\n    10.29.45.6.58060 > 10.29.45.83.8472: [no cksum] OTV, flags [I] (0x08), overlay 0, instance 29048\u001b[K\r\nIP (tos 0x0, ttl 64, id 5, offset 0, flags [DF], proto ESP (50), length 1448)\u001b[K\r\n    10.0.3.208 > 10.0.4.145: ESP(spi=0x00000006,seq=0x2e83614), length 1428\u001b[K\r\n\u001b[K\r\n# Check CPT instruction counter\u001b[K\r\n6. cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\n\u001b[K\r\nCPT instruction requests   45\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi* 1:bash- 2:bash                                                                              \"master\" 12:42 28-Apr-25\u001b(B\u001b[m\u001b[36;1H\u001b[?12l\u001b[?25h"]
[41.58263, "o", "\u0007"]
[42.044533, "o", "\u001b[A"]
[42.56477, "o", "\u001b[A"]
[42.597981, "o", "\u001b[A"]
[42.633213, "o", "\u001b[A"]
[42.667291, "o", "\u001b[A"]
[42.700719, "o", "\u001b[A"]
[42.735812, "o", "\u001b[A"]
[42.770163, "o", "\u001b[A"]
[42.804491, "o", "\u001b[A"]
[42.83909, "o", "\u001b[A"]
[42.874374, "o", "\u001b[A"]
[42.90812, "o", "\u001b[A"]
[42.941673, "o", "\u001b[A"]
[42.975726, "o", "\u001b[A"]
[43.011107, "o", "\u001b[A"]
[43.044793, "o", "\u001b[A"]
[43.078732, "o", "\u001b[A"]
[43.112955, "o", "\u001b[A"]
[43.147295, "o", "\u001b[A"]
[43.181293, "o", "\u001b[A"]
[43.220091, "o", "\u001b[A"]
[43.250037, "o", "\u001b[A"]
[43.284158, "o", "\u001b[A"]
[43.318871, "o", "\u001b[A"]
[43.353179, "o", "\u001b[A"]
[43.387981, "o", "\u001b[A"]
[43.422091, "o", "\u001b[A"]
[43.456606, "o", "\u001b[A"]
[43.867953, "o", "\r\n"]
[44.502076, "o", "\u001b[37d\u001b[1m-- INSERT --\u001b[9;1H\u001b(B\u001b[m"]
[45.063127, "o", "#On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\r#"]
[45.349963, "o", " On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\r# "]
[46.635613, "o", "\u001b[37;1H\u001b[K\u001b[9;2H"]
[50.491016, "o", "\u001b[?25l\u001b[30m\u001b[42m\u001b[38;1H[1] 0:vi* 1:bash- 2:bash                                                                              \"master\" 12:43 28-Apr-25\u001b(B\u001b[m\u001b[9;2H\u001b[?12l\u001b[?25h"]
[58.989125, "o", "\u001b[?25l\u001b[Hroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# # Testing IPsec Transparent Encryption\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash* 2:bash                                                                              \"master\" 12:43 28-Apr-25\u001b(B\u001b[m\u001b[6;47H\u001b[?12l\u001b[?25h"]
[60.495603, "o", "\u001b[?25l\u001b[H\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi  1:bash- 2:bash  3:bash*                                                                     \"master\" 12:43 28-Apr-25\u001b(B\u001b[m\u001b[1;1H\u001b[?12l\u001b[?25h"]
[60.52701, "o", "-bash: /root/.bash_profile: line 3: unexpected EOF while looking for matching `\"'\r\n-bash: /root/.bash_profile: line 5: syntax error: unexpected end of file\r\n"]
[60.527344, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[61.87211, "o", "\u001b[?25l\u001b[H-bash: /root/.bash_profile: line 3: unexpected EOF while looking for matching `\"'\u001b[K\r\n-bash: /root/.bash_profile: line 5: syntax error: unexpected end of file\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi  1:bash  2:bash* 3:bash-                                                                     \"master\" 12:43 28-Apr-25\u001b(B\u001b[m\u001b[3;47H\u001b[?12l\u001b[?25h"]
[62.968655, "o", "s"]
[63.207728, "o", "s"]
[63.430535, "o", "h"]
[63.710772, "o", " "]
[64.496641, "o", "r"]
[64.701306, "o", "o"]
[64.889128, "o", "o"]
[65.041434, "o", "t"]
[66.294106, "o", "@"]
[66.612211, "o", "1"]
[66.73981, "o", "0"]
[67.018794, "o", "."]
[67.688161, "o", "2"]
[67.885622, "o", "9"]
[68.26145, "o", "."]
[68.659099, "o", "4"]
[68.909925, "o", "5"]
[69.039581, "o", "."]
[70.557132, "o", "8"]
[70.802944, "o", "3"]
[71.12677, "o", "\r\n"]
[71.320704, "o", "root@10.29.45.83's password: "]
[72.364297, "o", "\u001b[?25l\u001b[30m\u001b[42m\u001b[38;1H[1] 0:vi  1:bash  2:ssh* 3:bash-                                                                      \"master\" 12:43 28-Apr-25\u001b(B\u001b[m\u001b[4;30H\u001b[?12l\u001b[?25h"]
[72.507209, "o", "\r\n"]
[72.605985, "o", "Welcome to Ubuntu 20.04.6 LTS (GNU/Linux 6.1.67-00024-g4fb36c321953 aarch64)\u001b[7;1H * Documentation:  https://help.ubuntu.com\r\n * Management:     https://landscape.canonical.com\r\n * Support:        https://ubuntu.com/pro\u001b[11;1HThis system has been minimized by removing packages and content that are\r\nnot required on a system that users do not log into.\u001b[14;1HTo restore this content, you can run the 'unminimize' command.\r\nLast login: Mon Apr 28 12:11:38 2025 from 10.29.24.110\r\n"]
[72.619531, "o", "root@worker1-dpu:~# "]
[73.04396, "o", "\r\nroot@worker1-dpu:~# "]
[75.79744, "o", "# On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\r\nroot@worker1-dpu:~# "]
[75.797602, "o", "echo 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs"]
[77.353704, "o", "\r\nroot@worker1-dpu:~# "]
[79.884864, "o", "\r\nroot@worker1-dpu:~# "]
[80.150431, "o", "\r\nroot@worker1-dpu:~# "]
[85.749178, "o", "\u001b[?25l\u001b[H-bash: /root/.bash_profile: line 3: unexpected EOF while looking for matching `\"'\u001b[K\r\n-bash: /root/.bash_profile: line 5: syntax error: unexpected end of file\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi  1:bash  2:ssh- 3:bash*                                                                      \"master\" 12:43 28-Apr-25\u001b(B\u001b[m\u001b[3;47H\u001b[?12l\u001b[?25h"]
[86.980588, "o", "s"]
[87.185429, "o", "s"]
[87.301336, "o", "h"]
[87.492836, "o", " "]
[87.723323, "o", "r"]
[87.86504, "o", "o"]
[88.0873, "o", "o"]
[88.286309, "o", "t"]
[89.090641, "o", "@"]
[89.411736, "o", "1"]
[89.592284, "o", "0"]
[89.85911, "o", "."]
[90.133932, "o", "2"]
[90.295566, "o", "9"]
[90.602007, "o", "."]
[91.455219, "o", "4"]
[91.742723, "o", "5"]
[91.877859, "o", "."]
[92.106289, "o", "6"]
[92.502373, "o", "\r\n"]
[92.586513, "o", "root@10.29.45.6's password: "]
[92.930803, "o", "\u001b[?25l\u001b[30m\u001b[42m\u001b[38;1H[1] 0:vi  1:bash  2:ssh- 3:ssh*                                                                       \"master\" 12:43 28-Apr-25\u001b(B\u001b[m\u001b[4;29H\u001b[?12l\u001b[?25h"]
[93.09773, "o", "\r\n"]
[93.194121, "o", "Welcome to Ubuntu 20.04.6 LTS (GNU/Linux 6.1.67-00024-g4fb36c321953 aarch64)\u001b[7;1H * Documentation:  https://help.ubuntu.com\r\n * Management:     https://landscape.canonical.com\r\n * Support:        https://ubuntu.com/pro\u001b[11;1HThis system has been minimized by removing packages and content that are\r\nnot required on a system that users do not log into.\u001b[14;1HTo restore this content, you can run the 'unminimize' command.\r\nLast login: Mon Apr 28 12:22:22 2025\r\n"]
[93.207331, "o", "root@worker2-dpu:~# "]
[93.657771, "o", "\r\nroot@worker2-dpu:~# "]
[93.865245, "o", "\r\nroot@worker2-dpu:~# "]
[94.06063, "o", "\r\nroot@worker2-dpu:~# "]
[94.277793, "o", "\r\nroot@worker2-dpu:~# "]
[95.741239, "o", "# On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\r\nroot@worker2-dpu:~# echo 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs"]
[96.343076, "o", "\r\nroot@worker2-dpu:~# "]
[96.720611, "o", "\r\nroot@worker2-dpu:~# "]
[96.933831, "o", "\r\nroot@worker2-dpu:~# "]
[102.239362, "o", "\u001b[?25l\u001b[H![CNI-Offload policies](deployments/images/cni-offload-policies.png)\u001b[K\r\n\u001b[K\r\n```Application running demo```\u001b[K\r\n\u001b[K\r\n[<img src=\"deployments/images/cni-offload-nodes.png\" style=\"width:400px;\"/>](doc/guides/_static/demo/CNI_Offload.html)\u001b[K\r\n\u001b[K\r\n#### Testing IPsec Transparent Encryption\u001b[K\r\n\u001b[K\r\n# On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\necho 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[K\r\n\u001b[K\r\n# Deploy Cilium with IPSec\u001b[K\r\n1. make deploy-ipsec\u001b[K\r\n\u001b[K\r\n# Check encryption status\u001b[K\r\n2. cilium encrypt status\u001b[K\r\n\u001b[K\r\n# Start tcpdump in dpu\u001b[K\r\n3. ssh root@<dpu-ip> tcpdump -i eth0\u001b[K\r\n\u001b[K\r\n# Create starwars demo\u001b[K\r\n4. kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml\u001b[K\r\n\u001b[K\r\n# Post http request to create traffic\u001b[K\r\n5. kubectl exec xwing -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\u001b[K\r\n\u001b[K\r\n# Check tcpdump for ESP packet\u001b[K\r\n16:10:30.388280 IP (tos 0x0, ttl 64, id 50931, offset 0, flags [none], proto UDP"]
[102.2396, "o", " (17), length 1498)\u001b[K\r\n    10.29.45.6.58060 > 10.29.45.83.8472: [no cksum] OTV, flags [I] (0x08), overlay 0, instance 29048\u001b[K\r\nIP (tos 0x0, ttl 64, id 5, offset 0, flags [DF], proto ESP (50), length 1448)\u001b[K\r\n    10.0.3.208 > 10.0.4.145: ESP(spi=0x00000006,seq=0x2e83614), length 1428\u001b[K\r\n\u001b[K\r\n# Check CPT instruction counter\u001b[K\r\n6. cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\n\u001b[K\r\nCPT instruction requests   45\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi* 1:bash  2:ssh  3:ssh-                                                                       \"master\" 12:43 28-Apr-25\u001b(B\u001b[m\u001b[9;2H\u001b[?12l\u001b[?25h"]
[110.200116, "o", "\u001b[?25l\u001b[30m\u001b[42m\u001b[38;1H[1] 0:vi* 1:bash  2:ssh  3:ssh-                                                                       \"master\" 12:44 28-Apr-25\u001b(B\u001b[m\u001b[9;2H\u001b[?12l\u001b[?25h"]
[110.857555, "o", "\u001b[?25l\u001b[H-bash: /root/.bash_profile: line 3: unexpected EOF while looking for matching `\"'\u001b[K\r\n-bash: /root/.bash_profile: line 5: syntax error: unexpected end of file\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# ssh root@10.29.45.83\u001b[K\r\nroot@10.29.45.83's password: \u001b[K\r\nWelcome to Ubuntu 20.04.6 LTS (GNU/Linux 6.1.67-00024-g4fb36c321953 aarch64)\u001b[K\r\n\u001b[K\r\n * Documentation:  https://help.ubuntu.com\u001b[K\r\n * Management:     https://landscape.canonical.com\u001b[K\r\n * Support:        https://ubuntu.com/pro\u001b[K\r\n\u001b[K\r\nThis system has been minimized by removing packages and content that are\u001b[K\r\nnot required on a system that users do not log into.\u001b[K\r\n\u001b[K\r\nTo restore this content, you can run the 'unminimize' command.\u001b[K\r\nLast login: Mon Apr 28 12:11:38 2025 from 10.29.24.110\u001b[K\r\nroot@worker1-dpu:~# \u001b[K\r\nroot@worker1-dpu:~# # On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\nroot@worker1-dpu:~# echo 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[K\r\nroot@worker1-dpu:~# \u001b[K\r\nroo"]
[110.857798, "o", "t@worker1-dpu:~# \u001b[K\r\nroot@worker1-dpu:~# \u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash  2:ssh* 3:ssh                                                                        \"master\" 12:44 28-Apr-25\u001b(B\u001b[m\u001b[21;21H\u001b[?12l\u001b[?25h"]
[111.998519, "o", "# Check CPT instruction counter"]
[112.595346, "o", "\r\nroot@worker1-dpu:~# "]
[112.869129, "o", "\r\nroot@worker1-dpu:~# "]
[113.816652, "o", "\r\u001b[2@(reverse-i-search)`':\u001b[C"]
[114.109657, "o", "\u001b[3Dc': # Check CPT instruction counter\u001b[7D"]
[114.309489, "o", "\u001b[21Ga': # On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[36D"]
[114.470588, "o", "\u001b[22G\u001b[44Pt': cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[26G"]
[115.763597, "o", "\r\u001b[5Proot@worker1-dpu:~#\r\n"]
[115.76415, "o", "CPT instruction requests   71\r\nCPT instruction latency    359330\r\nCPT NCB read requests      2132\r\nCPT NCB read latency       413458\r\nCPT read requests caused by UC fills   1648\r\nCPT active cycles pc       5430286\r\nCPT clock count pc         74709386111\r\nroot@worker1-dpu:~# "]
[117.073158, "o", "\r\nroot@worker1-dpu:~# "]
[126.136241, "o", "\u001b[?25l\u001b[H-bash: /root/.bash_profile: line 3: unexpected EOF while looking for matching `\"'\u001b[K\r\n-bash: /root/.bash_profile: line 5: syntax error: unexpected end of file\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# ssh root@10.29.45.6\u001b[K\r\nroot@10.29.45.6's password: \u001b[K\r\nWelcome to Ubuntu 20.04.6 LTS (GNU/Linux 6.1.67-00024-g4fb36c321953 aarch64)\u001b[K\r\n\u001b[K\r\n * Documentation:  https://help.ubuntu.com\u001b[K\r\n * Management:     https://landscape.canonical.com\u001b[K\r\n * Support:        https://ubuntu.com/pro\u001b[K\r\n\u001b[K\r\nThis system has been minimized by removing packages and content that are\u001b[K\r\nnot required on a system that users do not log into.\u001b[K\r\n\u001b[K\r\nTo restore this content, you can run the 'unminimize' command.\u001b[K\r\nLast login: Mon Apr 28 12:22:22 2025\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# # On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\nroot@worker2-dpu:~# echo 1 > /sys/bus/pci/devices/0002\\"]
[126.136405, "o", ":20\\:00.0/sriov_numvfs\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi  1:bash  2:ssh- 3:ssh*                                                                       \"master\" 12:44 28-Apr-25\u001b(B\u001b[m\u001b[24;21H\u001b[?12l\u001b[?25h"]
[127.394317, "o", "# Check CPT instruction counter"]
[127.948615, "o", "\r\nroot@worker2-dpu:~# "]
[128.262565, "o", "\r\nroot@worker2-dpu:~# "]
[129.3019, "o", "\r\u001b[2@(reverse-i-search)`':\u001b[C"]
[129.558595, "o", "\u001b[3Dc': # Check CPT instruction counter\u001b[7D"]
[129.779715, "o", "\u001b[21Ga': # On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[36D"]
[129.929225, "o", "\u001b[22G\u001b[44Pt': cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[26G"]
[130.827399, "o", "\r\u001b[5Proot@worker2-dpu:~#\r\n"]
[130.828177, "o", "CPT instruction requests   23\r\nCPT instruction latency    117784\r\nCPT NCB read requests      1790\r\nCPT NCB read latency       338483\r\nCPT read requests caused by UC fills   1648\r\nCPT active cycles pc       3369281\r\nCPT clock count pc         42287393169\r\nroot@worker2-dpu:~# "]
[131.563933, "o", "\r\nroot@worker2-dpu:~# "]
[132.257055, "o", "\r\nroot@worker2-dpu:~# "]
[137.807323, "o", "\u001b[?25l\u001b[H![CNI-Offload policies](deployments/images/cni-offload-policies.png)\u001b[K\r\n\u001b[K\r\n```Application running demo```\u001b[K\r\n\u001b[K\r\n[<img src=\"deployments/images/cni-offload-nodes.png\" style=\"width:400px;\"/>](doc/guides/_static/demo/CNI_Offload.html)\u001b[K\r\n\u001b[K\r\n#### Testing IPsec Transparent Encryption\u001b[K\r\n\u001b[K\r\n# On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\necho 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[K\r\n\u001b[K\r\n# Deploy Cilium with IPSec\u001b[K\r\n1. make deploy-ipsec\u001b[K\r\n\u001b[K\r\n# Check encryption status\u001b[K\r\n2. cilium encrypt status\u001b[K\r\n\u001b[K\r\n# Start tcpdump in dpu\u001b[K\r\n3. ssh root@<dpu-ip> tcpdump -i eth0\u001b[K\r\n\u001b[K\r\n# Create starwars demo\u001b[K\r\n4. kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml\u001b[K\r\n\u001b[K\r\n# Post http request to create traffic\u001b[K\r\n5. kubectl exec xwing -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\u001b[K\r\n\u001b[K\r\n# Check tcpdump for ESP packet\u001b[K\r\n16:10:30.388280 IP (tos 0x0, ttl 64, id 50931, offset 0, flags [none], proto UDP"]
[137.8075, "o", " (17), length 1498)\u001b[K\r\n    10.29.45.6.58060 > 10.29.45.83.8472: [no cksum] OTV, flags [I] (0x08), overlay 0, instance 29048\u001b[K\r\nIP (tos 0x0, ttl 64, id 5, offset 0, flags [DF], proto ESP (50), length 1448)\u001b[K\r\n    10.0.3.208 > 10.0.4.145: ESP(spi=0x00000006,seq=0x2e83614), length 1428\u001b[K\r\n\u001b[K\r\n# Check CPT instruction counter\u001b[K\r\n6. cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\n\u001b[K\r\nCPT instruction requests   45\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi* 1:bash  2:ssh  3:ssh-                                                                       \"master\" 12:44 28-Apr-25\u001b(B\u001b[m\u001b[9;2H\u001b[?12l\u001b[?25h"]
[145.457426, "o", "\u001b[?25l\u001b[Hroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# # Testing IPsec Transparent Encryption\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash* 2:ssh  3:ssh                                                                        \"master\" 12:44 28-Apr-25\u001b(B\u001b[m\u001b[6;47H\u001b[?12l\u001b[?25h"]
[146.785557, "o", "# Deploy Cilium with IPSec"]
[147.67054, "o", "\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# "]
[148.165976, "o", "\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# "]
[150.069042, "o", "m"]
[150.202718, "o", "a"]
[150.347399, "o", "k"]
[150.597615, "o", "e"]
[150.77022, "o", " "]
[151.004335, "o", "d"]
[151.249956, "o", "e"]
[151.355064, "o", "p"]
[151.55511, "o", "l"]
[151.754555, "o", "o"]
[151.955326, "o", "y"]
[152.202122, "o", "-"]
[152.485909, "o", "i"]
[152.713763, "o", "p"]
[152.833222, "o", "s"]
[153.093003, "o", "e"]
[153.407339, "o", "c"]
[155.396301, "o", "\r\n"]
[155.398192, "o", "kubectl apply -f deployments/\r\n"]
[155.552254, "o", "daemonset.apps/cni-offload-agent unchanged\r\n"]
[155.582306, "o", "daemonset.apps/cni-offload-host unchanged\r\n"]
[155.585268, "o", "sh deployments/install_cilium_ipsec.sh\r\n"]
[155.665817, "o", "error: failed to create secret secrets \"cilium-ipsec-keys\" already exists\r\n"]
[155.755814, "o", "Error: INSTALLATION FAILED: cannot re-use a name that is still in use\r\n"]
[155.758604, "o", "make: *** [Makefile:60: deploy-cilium-ipsec] Error 1\r\n"]
[155.75883, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[158.298413, "o", "m"]
[158.398467, "o", "a"]
[158.557248, "o", "k"]
[158.782459, "o", "e"]
[158.838724, "o", " "]
[159.103764, "o", "u"]
[159.309304, "o", "n"]
[159.432823, "o", "d"]
[159.66233, "o", "e"]
[159.714588, "o", "p"]
[159.944114, "o", "l"]
[160.160285, "o", "o"]
[160.361488, "o", "y"]
[160.686816, "o", "\r\n"]
[160.690851, "o", "kubectl delete -f deployments/ --ignore-not-found=true\r\n"]
[160.748766, "o", "daemonset.apps \"cni-offload-agent\" deleted\r\n"]
[160.757517, "o", "daemonset.apps \"cni-offload-host\" deleted\r\n"]
[160.799341, "o", "kubectl delete -f build/cilium/install/kubernetes/cilium/cm.yaml --ignore-not-found=true\r\n"]
[160.940701, "o", "helm delete cilium -n kube-system\r\n"]
[160.941249, "o", "\u001b[?25l\u001b[Hroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# # Testing IPsec Transparent Encryption\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# # Deploy Cilium with IPSec\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# make deploy-ipsec\u001b[K\r\nkubectl apply -f deployments/\u001b[K\r\ndaemonset.apps/cni-offload-agent unchanged\u001b[K\r\ndaemonset.apps/cni-offload-host unchanged\u001b[K\r\nsh deployments/install_cilium_ipsec.sh\u001b[K\r\nerror: failed to create secret secrets \"cilium-ipsec-keys\" already exists\u001b[K\r\nError: INSTALLATION FAILED: cannot re-use a name that is still in use\u001b[K\r\nmake: *** [Makefile:60: deploy-cilium-ipsec] Error 1\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# make undeploy\u001b[K\r\nkubectl delete -f deployments/ --ignore-not-found=true\u001b[K\r\ndaemonset.apps \"cni-offl"]
[160.941287, "o", "oad-agent\" deleted\u001b[K\r\ndaemonset.apps \"cni-offload-host\" deleted\u001b[K\r\nkubectl delete -f build/cilium/install/kubernetes/cilium/cm.yaml --ignore-not-found=true\u001b[K\r\nhelm delete cilium -n kube-system\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:make* 2:ssh  3:ssh                                                                        \"master\" 12:44 28-Apr-25\u001b(B\u001b[m\u001b[22;1H\u001b[?12l\u001b[?25h"]
[164.903479, "o", "release \"cilium\" uninstalled\r\n"]
[164.907643, "o", "kubectl delete secret -n kube-system   cilium-ipsec-keys --ignore-not-found=true\r\n"]
[165.60198, "o", "secret \"cilium-ipsec-keys\" deleted\r\n"]
[165.85587, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[166.928082, "o", "\u001b[?25l\u001b[30m\u001b[42m\u001b[38;1H[1] 0:vi- 1:bash* 2:ssh  3:ssh                                                                        \"master\" 12:45 28-Apr-25\u001b(B\u001b[m\u001b[25;47H\u001b[?12l\u001b[?25h"]
[166.928218, "o", "\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# "]
[167.170427, "o", "\r\n"]
[167.170553, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[167.36407, "o", "\r\n"]
[167.36422, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[168.34725, "o", "make undeploy"]
[168.592982, "o", "\u001b[8Ddeploy-ipsec"]
[171.385108, "o", "\r\n"]
[171.387755, "o", "kubectl apply -f deployments/\r\n"]
[171.55204, "o", "daemonset.apps/cni-offload-agent created\r\n"]
[171.650783, "o", "daemonset.apps/cni-offload-host created\r\n"]
[171.65316, "o", "sh deployments/install_cilium_ipsec.sh\r\n"]
[171.744029, "o", "secret/cilium-ipsec-keys created\r\n"]
[174.261609, "o", "\u001b[1;37r\u001b[9S\u001b[25dNAME: cilium\r\nLAST DEPLOYED: Mon Apr 28 12:45:05 2025\r\nNAMESPACE: kube-system\r\nSTATUS: deployed\r\nREVISION: 1\r\nTEST SUITE: None\r\nNOTES:\r\nYou have successfully installed Cilium with Hubble.\u001b[34;1HYour release version is 1.17.0-dev.\u001b[36;1HFor any further help, visit https://docs.cilium.io/en/v1.17/gettinghelp\u001b[1;38r\u001b[37;1H"]
[174.262052, "o", "\u001b[?25l\u001b[Hdaemonset.apps/cni-offload-agent unchanged\u001b[K\r\ndaemonset.apps/cni-offload-host unchanged\u001b[K\r\nsh deployments/install_cilium_ipsec.sh\u001b[K\r\nerror: failed to create secret secrets \"cilium-ipsec-keys\" already exists\u001b[K\r\nError: INSTALLATION FAILED: cannot re-use a name that is still in use\u001b[K\r\nmake: *** [Makefile:60: deploy-cilium-ipsec] Error 1\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# make undeploy\u001b[K\r\nkubectl delete -f deployments/ --ignore-not-found=true\u001b[K\r\ndaemonset.apps \"cni-offload-agent\" deleted\u001b[K\r\ndaemonset.apps \"cni-offload-host\" deleted\u001b[K\r\nkubectl delete -f build/cilium/install/kubernetes/cilium/cm.yaml --ignore-not-found=true\u001b[K\r\nhelm delete cilium -n kube-system\u001b[K\r\nrelease \"cilium\" uninstalled\u001b[K\r\nkubectl delete secret -n kube-system   cilium-ipsec-keys --ignore-not-found=true\u001b[K\r\nsecret \"cilium-ipsec-keys\" deleted\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/"]
[174.262127, "o", "usr/lib/go-1.23/src/cni-offload# make deploy-ipsec\u001b[K\r\nkubectl apply -f deployments/\u001b[K\r\ndaemonset.apps/cni-offload-agent created\u001b[K\r\ndaemonset.apps/cni-offload-host created\u001b[K\r\nsh deployments/install_cilium_ipsec.sh\u001b[K\r\nsecret/cilium-ipsec-keys created\u001b[K\r\nNAME: cilium\u001b[K\r\nLAST DEPLOYED: Mon Apr 28 12:45:05 2025\u001b[K\r\nNAMESPACE: kube-system\u001b[K\r\nSTATUS: deployed\u001b[K\r\nREVISION: 1\u001b[K\r\nTEST SUITE: None\u001b[K\r\nNOTES:\u001b[K\r\nYou have successfully installed Cilium with Hubble.\u001b[K\r\n\u001b[K\r\nYour release version is 1.17.0-dev.\u001b[K\r\n\u001b[K\r\nFor any further help, visit https://docs.cilium.io/en/v1.17/gettinghelp\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:make* 2:ssh  3:ssh                                                                        \"master\" 12:45 28-Apr-25\u001b(B\u001b[m\u001b[37;1H\u001b[?12l\u001b[?25h"]
[174.265881, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[176.792772, "o", "\u001b[?25l\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash* 2:ssh  3:ssh                                                                        \"master\" 12:45 28-Apr-25\u001b(B\u001b[m\u001b[37;47H\u001b[?12l\u001b[?25h"]
[176.792898, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[176.792964, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[177.058895, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[177.059041, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[177.276158, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[177.2763, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[177.470655, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[177.470725, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[198.820592, "o", "\r\u001b[24P(reverse-i-search)`':\u001b[C"]
[199.117379, "o", "\u001b[3Dg': # Testing IPsec Transparent Encryption\u001b[30D"]
[199.243083, "o", "\u001b[11De': kubectl get pods -n kube-system -o wide | grep host\u001b[33G"]
[199.37973, "o", "\u001b[11D\u001b[1@t\u001b[11C"]
[199.607108, "o", "\u001b[11D\u001b[1@ \u001b[11C"]
[199.80342, "o", "\u001b[11D\u001b[1@p\u001b[11C"]
[201.691904, "o", "\r\u001b[19@root@master:/usr/lib/go-1.23/src/cni-offload#\u001b[52C"]
[201.948954, "o", "\b\u001b[K"]
[202.205585, "o", "\b\u001b[K"]
[202.408359, "o", "\b\u001b[K"]
[202.996485, "o", "\b\u001b[K"]
[205.095497, "o", "c"]
[205.441695, "o", "i"]
[205.710462, "o", "l"]
[205.965977, "o", "i"]
[206.216484, "o", "u"]
[206.465371, "o", "m"]
[206.942275, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[207.101197, "o", "\u001b[1;37r\u001b[4S\u001b[33dcilium-6l74z                       0/1     Init:5/6   0              33s   10.29.45.61    master        <none>           <none>\r\ncilium-envoy-5mlvx                 0/1     Running    0              33s   10.29.45.61    master        <none>           <none>\u001b[1;38r\u001b[37;1H"]
[207.101361, "o", "\u001b[1;37r\u001b[16S\u001b[21dcilium-envoy-hm88h                 0/1     Pending    0              33s   <none>         <none>        <none>           <none>\r\ncilium-envoy-kwr2z                 1/1     Running    0              33s   10.29.45.83    worker1-dpu   <none>           <none>\r\ncilium-envoy-nf8xd                 1/1     Running    0              33s   10.29.45.6     worker2-dpu   <none>           <none>\r\ncilium-envoy-qrtw6                 0/1     Pending    0              33s   <none>         <none>        <none>           <none>\r\ncilium-operator-6db76fc8fc-9hfjl   1/1     Running    0              33s   10.29.45.6     worker2-dpu   <none>           <none>\r\ncilium-operator-6db76fc8fc-ktkgh   1/1     Running    0              33s   10.29.45.83    worker1-dpu   <none>           <none>\r\ncilium-tgz2j                       1/1     Running    0              33s   10.29.45.83    worker1-dpu   <none>           <none>\r\ncilium-zhlz8                       1/1     Running    0              33s   10.29.45.6     worker2-dpu   "]
[207.101445, "o", "<none>           <none>\u001b[1;38r\u001b[37;1H"]
[207.101962, "o", "\u001b[?25l\u001b[HLAST DEPLOYED: Mon Apr 28 12:45:05 2025\u001b[K\r\nNAMESPACE: kube-system\u001b[K\r\nSTATUS: deployed\u001b[K\r\nREVISION: 1\u001b[K\r\nTEST SUITE: None\u001b[K\r\nNOTES:\u001b[K\r\nYou have successfully installed Cilium with Hubble.\u001b[K\r\n\u001b[K\r\nYour release version is 1.17.0-dev.\u001b[K\r\n\u001b[K\r\nFor any further help, visit https://docs.cilium.io/en/v1.17/gettinghelp\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# kubectl get pods -n kube-system -o wide | grep cilium\u001b[K\r\ncilium-6l74z                       0/1     Init:5/6   0              33s   10.29.45.61    master        <none>           <none>\u001b[K\r\ncilium-envoy-5mlvx                 0/1     Running    0              33s   10.29.45.61    master        <none>           <none>\u001b[K\r\ncilium-envoy-hm88h                 0/1     Pending    0              33s   <none>         <none>        <none>           "]
[207.102036, "o", "<none>\u001b[K\r\ncilium-envoy-kwr2z                 1/1     Running    0              33s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[K\r\ncilium-envoy-nf8xd                 1/1     Running    0              33s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[K\r\ncilium-envoy-qrtw6                 0/1     Pending    0              33s   <none>         <none>        <none>           <none>\u001b[K\r\ncilium-operator-6db76fc8fc-9hfjl   1/1     Running    0              33s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[K\r\ncilium-operator-6db76fc8fc-ktkgh   1/1     Running    0              33s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[K\r\ncilium-tgz2j                       1/1     Running    0              33s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[K\r\ncilium-zhlz8                       1/1     Running    0              33s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:kubectl* 2:ssh  3:ssh                                         "]
[207.102092, "o", "                            \"master\" 12:45 28-Apr-25\u001b(B\u001b[m\u001b[37;1H\u001b[?12l\u001b[?25h"]
[207.104039, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[210.993268, "o", "\u001b[?25l\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash* 2:ssh  3:ssh                                                                        \"master\" 12:45 28-Apr-25\u001b(B\u001b[m\u001b[37;47H\u001b[?12l\u001b[?25h"]
[230.551542, "o", "\u001b[?25l\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash* 2:ssh  3:ssh                                                                        \"master\" 12:46 28-Apr-25\u001b(B\u001b[m\u001b[37;47H\u001b[?12l\u001b[?25h"]
[235.854548, "o", "kubectl get pods -n kube-system -o wide | grep cilium"]
[236.532558, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[236.602494, "o", "\u001b[1;37r\u001b[3S\u001b[34dcilium-6l74z                       1/1     Running   0              62s   10.29.45.61    master        <none>           <none>\u001b[35;1Hcilium-envoy-5mlvx                 1/1     Running   0              62s   10.29.45.61    master        <none>           <none>\u001b[36;1Hcilium-envoy-hm88h                 0/1     Pending   0              62s   <none>         <none>        <none>           <none>\u001b[36;1H\u001b[1;38r\u001b[37;1H"]
[236.602619, "o", "\u001b[1;37r\u001b[3S\u001b[34dcilium-envoy-kwr2z                 1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[35;1Hcilium-envoy-nf8xd                 1/1     Running   0              62s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[36;1Hcilium-envoy-qrtw6                 0/1     Pending   0              62s   <none>         <none>        <none>           <none>\u001b[36;1H\u001b[1;38r\u001b[37;1H\u001b[1;37r\u001b[2S\u001b[35dcilium-operator-6db76fc8fc-9hfjl   1/1     Running   0              62s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[36;1Hcilium-operator-6db76fc8fc-ktkgh   1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[36;1H\u001b[1;38r\u001b[37;1H"]
[236.602679, "o", "\u001b[1;37r\u001b[2S\u001b[35dcilium-tgz2j                       1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[36;1Hcilium-zhlz8                       1/1     Running   0              62s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[36;1H\u001b[1;38r\u001b[37;1H"]
[236.605307, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[239.513157, "o", "\u001b[?25l\u001b[H![CNI-Offload policies](deployments/images/cni-offload-policies.png)\u001b[K\r\n\u001b[K\r\n```Application running demo```\u001b[K\r\n\u001b[K\r\n[<img src=\"deployments/images/cni-offload-nodes.png\" style=\"width:400px;\"/>](doc/guides/_static/demo/CNI_Offload.html)\u001b[K\r\n\u001b[K\r\n#### Testing IPsec Transparent Encryption\u001b[K\r\n\u001b[K\r\n# On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\necho 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[K\r\n\u001b[K\r\n# Deploy Cilium with IPSec\u001b[K\r\n1. make deploy-ipsec\u001b[K\r\n\u001b[K\r\n# Check encryption status\u001b[K\r\n2. cilium encrypt status\u001b[K\r\n\u001b[K\r\n# Start tcpdump in dpu\u001b[K\r\n3. ssh root@<dpu-ip> tcpdump -i eth0\u001b[K\r\n\u001b[K\r\n# Create starwars demo\u001b[K\r\n4. kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml\u001b[K\r\n\u001b[K\r\n# Post http request to create traffic\u001b[K\r\n5. kubectl exec xwing -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\u001b[K\r\n\u001b[K\r\n# Check tcpdump for ESP packet\u001b[K\r\n16:10:30.388280 IP (tos 0x0, ttl 64, id 50931, offset 0, flags [none], proto UDP"]
[239.513249, "o", " (17), length 1498)\u001b[K\r\n    10.29.45.6.58060 > 10.29.45.83.8472: [no cksum] OTV, flags [I] (0x08), overlay 0, instance 29048\u001b[K\r\nIP (tos 0x0, ttl 64, id 5, offset 0, flags [DF], proto ESP (50), length 1448)\u001b[K\r\n    10.0.3.208 > 10.0.4.145: ESP(spi=0x00000006,seq=0x2e83614), length 1428\u001b[K\r\n\u001b[K\r\n# Check CPT instruction counter\u001b[K\r\n6. cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\n\u001b[K\r\nCPT instruction requests   45\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi* 1:bash- 2:ssh  3:ssh                                                                        \"master\" 12:46 28-Apr-25\u001b(B\u001b[m\u001b[9;2H\u001b[?12l\u001b[?25h"]
[245.210723, "o", "\u001b[?25l\u001b[Hroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# kubectl get pods -n kube-system -o wide | grep cilium\u001b[K\r\ncilium-6l74z                       0/1     Init:5/6   0              33s   10.29.45.61    master        <none>           <none>\u001b[K\r\ncilium-envoy-5mlvx                 0/1     Running    0              33s   10.29.45.61    master        <none>           <none>\u001b[K\r\ncilium-envoy-hm88h                 0/1     Pending    0              33s   <none>         <none>        <none>           <none>\u001b[K\r\ncilium-envoy-kwr2z                 1/1     Running    0              33s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[K\r\ncilium-envoy-nf8xd                 1/1     Running    0              33s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[K\r\ncilium-envoy-qrtw6                 0/1     Pend"]
[245.210773, "o", "ing    0              33s   <none>         <none>        <none>           <none>\u001b[K\r\ncilium-operator-6db76fc8fc-9hfjl   1/1     Running    0              33s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[K\r\ncilium-operator-6db76fc8fc-ktkgh   1/1     Running    0              33s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[K\r\ncilium-tgz2j                       1/1     Running    0              33s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[K\r\ncilium-zhlz8                       1/1     Running    0              33s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# kubectl get pods -n kube-system -o wide | grep cilium\u001b[K\r\ncilium-6l74z                       1/1     Running   0              62s   10.29.45.61    master        <none>           <none>\u001b[28;1Hcilium-envoy-5mlvx                 1/1     Running   0              62s   10.29.45.61    master        <none>           <none>\u001b[29;1Hcilium-envoy-hm88h                 0/1   "]
[245.210882, "o", "  Pending   0              62s   <none>         <none>        <none>           <none>\u001b[30;1Hcilium-envoy-kwr2z                 1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[31;1Hcilium-envoy-nf8xd                 1/1     Running   0              62s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[32;1Hcilium-envoy-qrtw6                 0/1     Pending   0              62s   <none>         <none>        <none>           <none>\u001b[33;1Hcilium-operator-6db76fc8fc-9hfjl   1/1     Running   0              62s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[34;1Hcilium-operator-6db76fc8fc-ktkgh   1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[35;1Hcilium-tgz2j                       1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[36;1Hcilium-zhlz8                       1/1     Running   0              62s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[37;1Hr"]
[245.210908, "o", "oot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash* 2:ssh  3:ssh                                                                        \"master\" 12:46 28-Apr-25\u001b(B\u001b[m\u001b[37;47H\u001b[?12l\u001b[?25h"]
[245.840796, "o", "# Check encryption status"]
[247.942179, "o", "^C"]
[247.942358, "o", "\u001b[1;37r\u001b[37;1H\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[1;38r\u001b[37;47H"]
[248.205977, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[248.206131, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[248.437212, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[248.437482, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[248.654209, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[248.654482, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[248.850286, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1Hroot@master:/usr/lib/go-1.23/src/cni-offload# "]
[249.529089, "o", "# Check encryption status"]
[250.273783, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1Hroot@master:/usr/lib/go-1.23/src/cni-offload# "]
[250.515889, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1Hroot@master:/usr/lib/go-1.23/src/cni-offload# "]
[250.729031, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[250.729172, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[250.930604, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[250.930747, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[251.126575, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1Hroot@master:/usr/lib/go-1.23/src/cni-offload# "]
[251.323166, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[251.323299, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[271.645574, "o", "k"]
[271.880225, "o", "u"]
[272.087611, "o", "b"]
[272.191051, "o", "e"]
[272.533968, "o", "c"]
[272.797326, "o", "tl "]
[273.274516, "o", "e"]
[273.578685, "o", "x"]
[273.894703, "o", "e"]
[274.168449, "o", "c"]
[274.350549, "o", " "]
[274.478143, "o", "-"]
[274.731444, "o", "i"]
[274.890221, "o", "t"]
[275.137704, "o", " "]
[275.268602, "o", "-"]
[275.489199, "o", "n"]
[275.630059, "o", " "]
[276.799538, "o", "k"]
[277.031208, "o", "u"]
[277.207233, "o", "b"]
[277.341525, "o", "e"]
[277.573652, "o", "-"]
[277.715642, "o", "s"]
[277.935779, "o", "y"]
[278.038869, "o", "s"]
[278.24059, "o", "t"]
[278.401318, "o", "e"]
[278.549304, "o", "m"]
[278.920655, "o", " "]
[279.367577, "o", "cilium-zhlz8"]
[279.815884, "o", " "]
[280.222235, "o", "-"]
[280.433778, "o", "-"]
[280.596493, "o", " "]
[281.084912, "o", "c"]
[281.305784, "o", "i"]
[281.535096, "o", "l"]
[281.772691, "o", "i"]
[281.988612, "o", "u"]
[282.222721, "o", "m"]
[282.428048, "o", " "]
[282.789292, "o", "e"]
[283.005735, "o", "n"]
[283.205628, "o", "c"]
[283.489966, "o", "r"]
[283.624097, "o", "y"]
[283.892956, "o", "p"]
[284.056042, "o", "t"]
[284.205753, "o", " "]
[284.655602, "o", "s"]
[284.804846, "o", "t"]
[284.918066, "o", "a"]
[285.049288, "o", "t"]
[285.260097, "o", "u"]
[285.393462, "o", "s"]
[286.01105, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[286.106089, "o", "\u001b[1;37r\u001b[2S\u001b[35dDefaulted container \"cilium-agent\" out of: cilium-agent, config (init), mount-cgroup (init), apply-sysctl-overwrites (init), mount-bpf-fs (init), clean-cilium-state (init), install-cni-binaries (init)\u001b[1;38r\u001b[37;1H"]
[286.209637, "o", "\u001b[1;37r\u001b[5S\u001b[32dEncryption: IPsec                     \r\nDecryption interface(s): \r\nKeys in use: 1                         \r\nMax Seq. Number: N/A\r\nErrors: 0                         \u001b[1;38r\u001b[37;1H"]
[286.21677, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[287.201785, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[287.202389, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[290.572282, "o", "\u001b[?25l\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash* 2:ssh  3:ssh                                                                        \"master\" 12:47 28-Apr-25\u001b(B\u001b[m\u001b[37;47H\u001b[?12l\u001b[?25h"]
[304.369838, "o", "\u001b[?25l\u001b[H![CNI-Offload policies](deployments/images/cni-offload-policies.png)\u001b[K\r\n\u001b[K\r\n```Application running demo```\u001b[K\r\n\u001b[K\r\n[<img src=\"deployments/images/cni-offload-nodes.png\" style=\"width:400px;\"/>](doc/guides/_static/demo/CNI_Offload.html)\u001b[K\r\n\u001b[K\r\n#### Testing IPsec Transparent Encryption\u001b[K\r\n\u001b[K\r\n# On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\necho 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[K\r\n\u001b[K\r\n# Deploy Cilium with IPSec\u001b[K\r\n1. make deploy-ipsec\u001b[K\r\n\u001b[K\r\n# Check encryption status\u001b[K\r\n2. cilium encrypt status\u001b[K\r\n\u001b[K\r\n# Start tcpdump in dpu\u001b[K\r\n3. ssh root@<dpu-ip> tcpdump -i eth0\u001b[K\r\n\u001b[K\r\n# Create starwars demo\u001b[K\r\n4. kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml\u001b[K\r\n\u001b[K\r\n# Post http request to create traffic\u001b[K\r\n5. kubectl exec xwing -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\u001b[K\r\n\u001b[K\r\n# Check tcpdump for ESP packet\u001b[K\r\n16:10:30.388280 IP (tos 0x0, ttl 64, id 50931, offset 0, flags [none], proto UDP"]
[304.370027, "o", " (17), length 1498)\u001b[K\r\n    10.29.45.6.58060 > 10.29.45.83.8472: [no cksum] OTV, flags [I] (0x08), overlay 0, instance 29048\u001b[K\r\nIP (tos 0x0, ttl 64, id 5, offset 0, flags [DF], proto ESP (50), length 1448)\u001b[K\r\n    10.0.3.208 > 10.0.4.145: ESP(spi=0x00000006,seq=0x2e83614), length 1428\u001b[K\r\n\u001b[K\r\n# Check CPT instruction counter\u001b[K\r\n6. cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\n\u001b[K\r\nCPT instruction requests   45\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi* 1:bash- 2:ssh  3:ssh                                                                        \"master\" 12:47 28-Apr-25\u001b(B\u001b[m\u001b[9;2H\u001b[?12l\u001b[?25h"]
[314.241179, "o", "\u001b[1;37r\u001b[2;37r\u001b[36S\u001b[1;1H\u001b[Kcan get from\r\n``` cni-offload/pkg/cilium/examples/minikube/ ```\u001b[5;1H### Testbed Diagram:\r\n![TestBed diagram](deployments/images/cni-offload-testbed1.png)\u001b[8;1H```kubectl get node ```\u001b[10;1H![K8s Node](deployments/images/cni-offload-nodes.png)\u001b[12;1H### Services\r\n``` kubectl apply -f http-sw-app.yaml```\u001b[15;1Hwe have clusterIP services running in the name of deathstar which abstract both deathstar pods\u001b[17;1H``` kubectl get svc  ```\u001b[19;1H![svc pic](deployments/images/cni-offload-svc-1.1.png)\u001b[21;1H#### Testing services\u001b[23;1HClusterIP can be used to send traffic to deathstar pod from either tiefighter or xwing\u001b[25;1H![TF-svc](deployments/images/cni-offload-service-testing1.1.png)\u001b[27;1H#### Testing Policies\u001b[29;1H``` kubectl apply -f sw_l3_l4_l7_policy.yaml   sw_l3_l4_policy.yaml ```\u001b[31;1HAfter applying policies yaml file one can restrict entry to deathstar pod from either of xwing or tiefighter in this case\r\nwe are restricting any traffic to deathstar pod from xwing as per l3-l4"]
[314.241415, "o", "-l7 policies so all traffic from tiefighter will be abll\re to land on deathstar ship but from xwing will be denied.\u001b[35;1H![CNI-Offload policies](deployments/images/cni-offload-policies.png)\u001b[1;38r\u001b[36;1H"]
[316.063526, "o", "\r\n1 change; before #1  12:42:58\u0007\u001b[?25l\u001b[1;36r\u001b[1;1H\u001b[7M\u001b[30;1H```Application running demo```\u001b[32;1H[<img src=\"deployments/images/cni-offload-nodes.png\" style=\"width:400px;\"/>](doc/guides/_static/demo/CNI_Offload.html)\u001b[34;1H#### Testing IPsec Transparent Encryption\u001b[36;1HOn Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[37;1H\u001b[K1 change; before #1  12:42:58\u001b[1;38r\u001b[36;1H\u001b[?12l\u001b[?25h"]
[317.67238, "o", "\u001b[1;36r\u001b[1;1H\u001b[27M\u001b[10;1Hecho 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[12;1H# Deploy Cilium with IPSec\r\n1. make deploy-ipsec\u001b[15;1H# Check encryption status\r\n2. cilium encrypt status\u001b[18;1H# Start tcpdump in dpu\r\n3. ssh root@<dpu-ip> tcpdump -i eth0\u001b[21;1H# Create starwars demo\r\n4. kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml\u001b[24;1H# Post http request to create traffic\r\n5. kubectl exec xwing -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\u001b[27;1H# Check tcpdump for ESP packet\r\n16:10:30.388280 IP (tos 0x0, ttl 64, id 50931, offset 0, flags [none], proto UDP (17), length 1498)\r\n    10.29.45.6.58060 > 10.29.45.83.8472: [no cksum] OTV, flags [I] (0x08), overlay 0, instance 29048\r\nIP (tos 0x0, ttl 64, id 5, offset 0, flags [DF], proto ESP (50), length 1448)\r\n    10.0.3.208 > 10.0.4.145: ESP(spi=0x00000006,seq=0x2e83614), length 1428\u001b[33;1H# Check CPT instruction counter\r\n6. cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[36;1HCPT instruction requests   45\u001b[37;1H\u001b[K\u001b"]
[317.672426, "o", "[1;38r\u001b[36;1H"]
[322.003458, "o", "\u001b[?25l\u001b[H-bash: /root/.bash_profile: line 3: unexpected EOF while looking for matching `\"'\u001b[K\r\n-bash: /root/.bash_profile: line 5: syntax error: unexpected end of file\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# ssh root@10.29.45.83\u001b[K\r\nroot@10.29.45.83's password: \u001b[K\r\nWelcome to Ubuntu 20.04.6 LTS (GNU/Linux 6.1.67-00024-g4fb36c321953 aarch64)\u001b[K\r\n\u001b[K\r\n * Documentation:  https://help.ubuntu.com\u001b[K\r\n * Management:     https://landscape.canonical.com\u001b[K\r\n * Support:        https://ubuntu.com/pro\u001b[K\r\n\u001b[K\r\nThis system has been minimized by removing packages and content that are\u001b[K\r\nnot required on a system that users do not log into.\u001b[K\r\n\u001b[K\r\nTo restore this content, you can run the 'unminimize' command.\u001b[K\r\nLast login: Mon Apr 28 12:11:38 2025 from 10.29.24.110\u001b[K\r\nroot@worker1-dpu:~# \u001b[K\r\nroot@worker1-dpu:~# # On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\nroot@worker1-dpu:~# echo 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[K\r\nroot@worker1-dpu:~# \u001b[K\r\nroo"]
[322.003638, "o", "t@worker1-dpu:~# \u001b[K\r\nroot@worker1-dpu:~# # Check CPT instruction counter\u001b[K\r\nroot@worker1-dpu:~# \u001b[K\r\nroot@worker1-dpu:~# cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\nCPT instruction requests   71\u001b[K\r\nCPT instruction latency    359330\u001b[K\r\nCPT NCB read requests      2132\u001b[K\r\nCPT NCB read latency       413458\u001b[K\r\nCPT read requests caused by UC fills   1648\u001b[K\r\nCPT active cycles pc       5430286\u001b[K\r\nCPT clock count pc         74709386111\u001b[K\r\nroot@worker1-dpu:~# \u001b[K\r\nroot@worker1-dpu:~# \u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash  2:ssh* 3:ssh                                                                        \"master\" 12:47 28-Apr-25\u001b(B\u001b[m\u001b[32;21H\u001b[?12l\u001b[?25h"]
[323.983659, "o", "i"]
[324.217461, "o", "p"]
[324.784135, "o", "\b\u001b[K"]
[324.998869, "o", "\b\u001b[K"]
[325.411371, "o", "\r\nroot@worker1-dpu:~# "]
[326.355417, "o", "# Start tcpdump in dpu"]
[327.032095, "o", "\r\nroot@worker1-dpu:~# "]
[327.337965, "o", "\r\nroot@worker1-dpu:~# "]
[328.324019, "o", "i"]
[328.545215, "o", "p"]
[328.780379, "o", " "]
[328.913559, "o", "r"]
[329.079615, "o", "\r\n"]
[329.081003, "o", "\u001b[1;37r\u001b[9S\u001b[27ddefault via 10.29.44.1 dev enP2p4s0 proto dhcp metric 110 \r\n10.0.0.0/24 via 10.0.4.145 dev cilium_host proto kernel src 10.0.4.145 mtu 1373 \r\n10.0.1.0/24 via 10.0.4.145 dev cilium_host proto kernel src 10.0.4.145 mtu 1373 \r\n10.0.2.0/24 via 10.0.4.145 dev cilium_host proto kernel src 10.0.4.145 mtu 1373 \r\n10.0.3.0/24 via 10.0.4.145 dev cilium_host proto kernel src 10.0.4.145 mtu 1373 \r\n10.0.4.0/24 via 10.0.4.145 dev cilium_host proto kernel src 10.0.4.145 \r\n10.0.4.145 dev cilium_host proto kernel scope link \r\n10.29.44.0/22 dev enP2p4s0 proto kernel scope link src 10.29.45.83 metric 110 \r\n172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 linkdown \r\n192.168.1.0/24 dev enP2p1s0v0 proto kernel scope link src 192.168.1.1 \r\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[332.299624, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[332.541082, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[332.726509, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[334.488792, "o", "t"]
[334.62854, "o", "c"]
[334.823671, "o", "p"]
[334.990506, "o", "d"]
[335.174881, "o", "u"]
[335.431486, "o", "m"]
[335.657292, "o", "p"]
[335.958765, "o", " "]
[336.072516, "o", "-"]
[336.329109, "o", "i"]
[336.477166, "o", " "]
[337.086738, "o", "enP2p4s0"]
[337.801161, "o", " "]
[340.360187, "o", "d"]
[342.500619, "o", "s"]
[342.645023, "o", "t"]
[342.972604, "o", " "]
[343.371687, "o", "1"]
[343.602372, "o", "0"]
[343.887515, "o", "."]
[344.167743, "o", "2"]
[344.30111, "o", "9"]
[344.628677, "o", "."]
[346.846739, "o", "\b\u001b[K"]
[347.109054, "o", "\b\u001b[K"]
[347.628327, "o", "\b\u001b[K"]
[347.663482, "o", "\b\u001b[K"]
[347.696361, "o", "\b\u001b[K"]
[347.730953, "o", "\b\u001b[K"]
[347.765094, "o", "\b\u001b[K"]
[348.076063, "o", "\b\u001b[K"]
[348.286447, "o", "\b\u001b[K"]
[348.467953, "o", "\b\u001b[K"]
[348.788958, "o", "s"]
[349.125579, "o", "r"]
[349.347731, "o", "c"]
[349.465702, "o", " "]
[349.881729, "o", "1"]
[350.031783, "o", "0"]
[350.319812, "o", "."]
[350.586678, "o", "\u001b[?25l\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash  2:ssh* 3:ssh                                                                        \"master\" 12:48 28-Apr-25\u001b(B\u001b[m\u001b[37;48H\u001b[?12l\u001b[?25h"]
[350.589932, "o", "2"]
[350.723566, "o", "9"]
[351.056444, "o", "."]
[351.928298, "o", "4"]
[352.189038, "o", "5"]
[352.395096, "o", "."]
[352.77544, "o", "6"]
[353.716156, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[353.793722, "o", "\u001b[1;37r\u001b[2S\u001b[35dtcpdump: verbose output suppressed, use -v or -vv for full protocol decode\r\nlistening on enP2p4s0, link-type EN10MB (Ethernet), capture size 262144 bytes\u001b[1;38r\u001b[37;1H"]
[354.354361, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[354.585195, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[354.80061, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[355.030526, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[357.68789, "o", "\u001b[?25l\u001b[H![CNI-Offload policies](deployments/images/cni-offload-policies.png)\u001b[K\r\n\u001b[K\r\n```Application running demo```\u001b[K\r\n\u001b[K\r\n[<img src=\"deployments/images/cni-offload-nodes.png\" style=\"width:400px;\"/>](doc/guides/_static/demo/CNI_Offload.html)\u001b[K\r\n\u001b[K\r\n#### Testing IPsec Transparent Encryption\u001b[K\r\n\u001b[K\r\nOn Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\necho 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[K\r\n\u001b[K\r\n# Deploy Cilium with IPSec\u001b[K\r\n1. make deploy-ipsec\u001b[K\r\n\u001b[K\r\n# Check encryption status\u001b[K\r\n2. cilium encrypt status\u001b[K\r\n\u001b[K\r\n# Start tcpdump in dpu\u001b[K\r\n3. ssh root@<dpu-ip> tcpdump -i eth0\u001b[K\r\n\u001b[K\r\n# Create starwars demo\u001b[K\r\n4. kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml\u001b[K\r\n\u001b[K\r\n# Post http request to create traffic\u001b[K\r\n5. kubectl exec xwing -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\u001b[K\r\n\u001b[K\r\n# Check tcpdump for ESP packet\u001b[K\r\n16:10:30.388280 IP (tos 0x0, ttl 64, id 50931, offset 0, flags [none], proto UDP ("]
[357.688144, "o", "17), length 1498)\u001b[K\r\n    10.29.45.6.58060 > 10.29.45.83.8472: [no cksum] OTV, flags [I] (0x08), overlay 0, instance 29048\u001b[K\r\nIP (tos 0x0, ttl 64, id 5, offset 0, flags [DF], proto ESP (50), length 1448)\u001b[K\r\n    10.0.3.208 > 10.0.4.145: ESP(spi=0x00000006,seq=0x2e83614), length 1428\u001b[K\r\n\u001b[K\r\n# Check CPT instruction counter\u001b[K\r\n6. cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\n\u001b[K\r\nCPT instruction requests   45\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi* 1:bash  2:ssh- 3:ssh                                                                        \"master\" 12:48 28-Apr-25\u001b(B\u001b[m\u001b[36;1H\u001b[?12l\u001b[?25h"]
[365.47249, "o", "\u001b[?25l\u001b[H>\u001b[K\r\ncilium-tgz2j                       1/1     Running    0              33s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[K\r\ncilium-zhlz8                       1/1     Running    0              33s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# kubectl get pods -n kube-system -o wide | grep cilium\u001b[K\r\ncilium-6l74z                       1/1     Running   0              62s   10.29.45.61    master        <none>           <none>\u001b[8;1Hcilium-envoy-5mlvx                 1/1     Running   0              62s   10.29.45.61    master        <none>           <none>\u001b[9;1Hcilium-envoy-hm88h                 0/1     Pending   0              62s   <none>         <none>        <none>           <none>\u001b[10;1Hcilium-envoy-kwr2z                 1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[11;1Hcilium-envoy-nf8xd                 1/1     Running   0              62s   10.29.45.6     worker2-dpu   <none>  "]
[365.472557, "o", "         <none>\u001b[12;1Hcilium-envoy-qrtw6                 0/1     Pending   0              62s   <none>         <none>        <none>           <none>\u001b[13;1Hcilium-operator-6db76fc8fc-9hfjl   1/1     Running   0              62s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[14;1Hcilium-operator-6db76fc8fc-ktkgh   1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[15;1Hcilium-tgz2j                       1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[16;1Hcilium-zhlz8                       1/1     Running   0              62s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[17;1Hroot@master:/usr/lib/go-1.23/src/cni-offload# # Check encryption status^C\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# # Check e"]
[365.472585, "o", "ncryption status\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# kubectl exec -it -n kube-system cilium-zhlz8 -- cilium encrypt status\u001b[K\r\nDefaulted container \"cilium-agent\" out of: cilium-agent, config (init), mount-cgroup (init), apply-sysctl-overwrites (init), mount-bpf-fs (init), clean-cilium-state (init), install-cni-binaries (init)\u001b[K\r\nEncryption: IPsec                     \u001b[K\r\nDecryption interface(s): \u001b[K\r\nKeys in use: 1                         \u001b[K\r\nMax Seq. Number: N/A\u001b[K\r\nErrors: 0                         \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash* 2:ssh  3:ssh                                                                        \"master\" 12:48 28-Apr-25\u001b(B\u001b"]
[365.472768, "o", "[m\u001b[37;47H\u001b[?12l\u001b[?25h"]
[367.93989, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[36;47H# Create starwars demo\u001b[1;38r\u001b[37;1Hroot@master:/usr/lib/go-1.23/src/cni-offload# "]
[368.551389, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1Hroot@master:/usr/lib/go-1.23/src/cni-offload# "]
[368.782747, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1Hroot@master:/usr/lib/go-1.23/src/cni-offload# "]
[369.01746, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[369.017653, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[370.032214, "o", "\r\u001b[24P(reverse-i-search)`':\u001b[C"]
[370.337593, "o", "\u001b[3Da': # Create starwars demo\u001b[8D"]
[370.482233, "o", "\u001b[17Dp': kubectl delete -f build/cilium/examples/minikube/http-sw-app.yaml\u001b[8D"]
[370.701696, "o", "\u001b[22G\u001b[1@p\u001b[60C"]
[370.932251, "o", "\u001b[23Gl': kubectl apply\u001b[5D"]
[372.619528, "o", "\r\u001b[20@root@master:/usr/lib/go-1.23/src/cni-offload#\u001b[9C"]
[372.61965, "o", "\u001b[56C"]
[374.414736, "o", " "]
[377.559864, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[377.866321, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[Aservice/deathstar created\u001b[1;38r\u001b[37;1H"]
[378.033074, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[Adeployment.apps/deathstar created\u001b[1;38r\u001b[37;1H"]
[378.079259, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[Apod/tiefighter created\u001b[1;38r\u001b[37;1H"]
[378.079969, "o", "\u001b[?25l\u001b[Hcilium-envoy-hm88h                 0/1     Pending   0              62s   <none>         <none>        <none>           <none>\u001b[2;1Hcilium-envoy-kwr2z                 1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[3;1Hcilium-envoy-nf8xd                 1/1     Running   0              62s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[4;1Hcilium-envoy-qrtw6                 0/1     Pending   0              62s   <none>         <none>        <none>           <none>\u001b[5;1Hcilium-operator-6db76fc8fc-9hfjl   1/1     Running   0              62s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[6;1Hcilium-operator-6db76fc8fc-ktkgh   1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[7;1Hcilium-tgz2j                       1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[8;1Hcilium-zhlz8                       1/1     Running   0              62s   10.29.45.6     wo"]
[378.080025, "o", "rker2-dpu   <none>           <none>\u001b[9;1Hroot@master:/usr/lib/go-1.23/src/cni-offload# # Check encryption status^C\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# # Check encryption status\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# kubectl exec -it -n kube-system cilium-zhlz8 -- cilium encrypt status\u001b[K\r\nDefaulted container \"cilium-agent\" out of: cilium-agent, config (init), mount-cgroup (init), apply-sysctl-overwrites (init), mount-bpf-fs (init), clean-cilium-state (init), install-cni-binaries (init)\u001b[K\r\nEncryption: IPsec                     \u001b[K\r\nDe"]
[378.080064, "o", "cryption interface(s): \u001b[K\r\nKeys in use: 1                         \u001b[K\r\nMax Seq. Number: N/A\u001b[K\r\nErrors: 0                         \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# # Create starwars demo\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml \u001b[K\r\nservice/deathstar created\u001b[K\r\ndeployment.apps/deathstar created\u001b[K\r\npod/tiefighter created\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:kubectl* 2:ssh  3:ssh                                                                     \"master\" 12:48 28-Apr-25\u001b(B\u001b[m\u001b[37;1H\u001b[?12l\u001b[?25h"]
[378.23408, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[Apod/xwing created\u001b[1;38r\u001b[37;1H"]
[378.237913, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[380.027972, "o", "\u001b[?25l\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash* 2:ssh  3:ssh                                                                        \"master\" 12:48 28-Apr-25\u001b(B\u001b[m\u001b[37;47H\u001b[?12l\u001b[?25h"]
[380.028139, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[380.028179, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[384.606792, "o", "\r\u001b[24P(reverse-i-search)`':\u001b[C"]
[384.931688, "o", "\u001b[3D\u001b[66@c': kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml\u001b[41D"]
[385.020467, "o", "\u001b[21Gu': kubectl exec tiefighter -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\u001b[52G"]
[385.377658, "o", "\u001b[22G\u001b[1@r\u001b[30C"]
[385.517959, "o", "\u001b[23G\u001b[1@l\u001b[30C"]
[386.51534, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[Aroot@master:/usr/lib/go-1.23/src/cni-offload# kubectl exec tiefighter -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\r\n\u001b[1;38r\u001b[37;1H"]
[386.959436, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[AShip landed\u001b[1;38r\u001b[37;1H"]
[386.968943, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[390.239941, "o", "\u001b[?25l\u001b[Hroot@worker1-dpu:~# tcpdump -i enP2p4s0 src 10.29.45.6\u001b[K\r\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\u001b[K\r\nlistening on enP2p4s0, link-type EN10MB (Ethernet), capture size 262144 bytes\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n12:48:21.207514 IP 10.29.45.6.4240 > hyd11153-dpu.47064: Flags [.], ack 2823659608, win 509, options [nop,nop,TS val 1376205010 ecr 1038205923], length 0\u001b[K\r\n12:48:21.207547 IP 10.29.45.6.40646 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 4\u001b[K\r\nIP 10.0.3.31.4240 > worker1-dpu.40408: Flags [.], ack 4062281939, win 505, options [nop,nop,TS val 3903370462 ecr 63114683], length 0\u001b[K\r\n12:48:21.302876 IP 10.29.45.6.55451 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 6\u001b[K\r\nIP 10.0.3.208 > 10.0.4.27: ICMP echo request, id 53739, seq 139, length 24\u001b[K\r\n12:48:21.302890 IP 10.29.45.6 > hyd11153-dpu: ICMP echo request, id 53739, seq 139, length 24\u001b[K\r\n12:48:21.313584 IP 10.29.45.6.58223 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0,"]
[390.240255, "o", " instance 6\u001b[K\r\nIP 10.0.3.208.36994 > 10.0.4.27.4240: Flags [P.], seq 2033229589:2033229689, ack 863035409, win 511, options [nop,nop,TS val 2151480982 ecr 1053543330], length 100\u001b[K\r\n12:48:21.313828 IP 10.29.45.6.58223 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 6\u001b[K\r\nIP 10.0.3.208.36994 > 10.0.4.27.4240: Flags [.], ack 76, win 511, options [nop,nop,TS val 2151480982 ecr 1053573332], length 0\u001b[21;1H12:48:21.313946 IP 10.29.45.6.54512 > hyd11153-dpu.4240: Flags [P.], seq 1287483267:1287483369, ack 1150098705, win 502, options [nop,nop,TS val 1376205116 ecr 1038191131], length 102\u001b[K\r\n12:48:21.314095 IP 10.29.45.6.54512 > hyd11153-dpu.4240: Flags [.], ack 76, win 502, options [nop,nop,TS val 1376205116 ecr 1038221134], length 0\u001b[K\r\n12:48:22.125935 IP 10.29.45.6.4240 > hyd11153-dpu.47064: Flags [.], ack 1, win 509, options [nop,nop,TS val 1376205928 ecr 1038221027], length 0\u001b[K\r\n12:48:22.125996 IP 10.29.45.6.40646 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 4\u001b[K\r\nIP 10.0."]
[390.240476, "o", "3.31.4240 > worker1-dpu.40408: Flags [.], ack 1, win 505, options [nop,nop,TS val 3903371380 ecr 63129787], length 0\u001b[K\r\n12:48:36.311412 IP 10.29.45.6.4240 > hyd11153-dpu.47064: Flags [.], ack 1, win 509, options [nop,nop,TS val 1376220114 ecr 1038221027], length 0\u001b[K\r\n12:48:36.315437 IP 10.29.45.6.40646 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 4\u001b[K\r\nIP 10.0.3.31.4240 > worker1-dpu.40408: Flags [.], ack 1, win 505, options [nop,nop,TS val 3903385570 ecr 63129787], length 0\u001b[K\r\n12:48:36.461958 IP 10.29.45.6.54512 > hyd11153-dpu.4240: Flags [.], ack 76, win 502, options [nop,nop,TS val 1376220264 ecr 1038221134], length 0\u001b[K\r\n12:48:36.462027 IP 10.29.45.6.58223 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 6\u001b[K\r\nIP 10.0.3.208.36994 > 10.0.4.27.4240: Flags [.], ack 76, win 511, options [nop,nop,TS val 2151496130 ecr 1053573332], length 0\u001b[37;1H\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi  1:bash- 2:ssh* 3:ssh                                                                        \"master\" 12:4"]
[390.240642, "o", "8 28-Apr-25\u001b(B\u001b[m\u001b[37;1H\u001b[?12l\u001b[?25h"]
[397.738171, "o", "\u001b[1;37r\u001b[3S\u001b[34d12:48:50.862638 IP 10.29.45.6.59682 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 4\r\nIP 10.0.3.31 > worker1-dpu: ICMP echo reply, id 43758, seq 1968, length 24\r\n12:48:50.862655 IP 10.29.45.6 > hyd11153-dpu: ICMP echo reply, id 43758, seq 1968, length 24\u001b[1;38r\u001b[37;1H"]
[397.743456, "o", "\u001b[1;37r\u001b[2S\u001b[35d12:48:50.868409 IP 10.29.45.6.4240 > hyd11153-dpu.47064: Flags [P.], seq 1:76, ack 102, win 509, options [nop,nop,TS val 1376234671 ecr 1038250688], length 75\u001b[1;38r\u001b[37;1H"]
[397.74392, "o", "\u001b[1;37r\u001b[3S\u001b[34d12:48:50.868811 IP 10.29.45.6.40646 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 4\r\nIP 10.0.3.31.4240 > worker1-dpu.40408: Flags [P.], seq 1:76, ack 101, win 505, options [nop,nop,TS val 3903400123 ecr 63159448], length 75\u001b[1;38r\u001b[37;1H"]
[398.4455, "o", "\u001b[1;37r\u001b[4S\u001b[33d12:48:51.569961 IP 10.29.45.6.54512 > hyd11153-dpu.4240: Flags [.], ack 76, win 502, options [nop,nop,TS val 1376235372 ecr 1038221134], length 0\r\n12:48:51.570025 IP 10.29.45.6.58223 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 6\r\nIP 10.0.3.208.36994 > 10.0.4.27.4240: Flags [.], ack 76, win 511, options [nop,nop,TS val 2151511238 ecr 1053573332], length 0\u001b[36;1H\u001b[1;38r\u001b[37;1H"]
[398.546572, "o", "\u001b[1;37r\u001b[4S\u001b[33d12:48:51.671295 IP 10.29.45.6.54512 > hyd11153-dpu.4240: Flags [.], ack 76, win 502, options [nop,nop,TS val 1376235474 ecr 1038221134], length 0\r\n12:48:51.671312 IP 10.29.45.6.58223 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 6\r\nIP 10.0.3.208.36994 > 10.0.4.27.4240: Flags [.], ack 76, win 511, options [nop,nop,TS val 2151511340 ecr 1053573332], length 0\u001b[36;1H\u001b[1;38r\u001b[37;1H"]
[403.352965, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[403.809939, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[405.1461, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[405.439606, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[405.696288, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[405.984478, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[406.245558, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[407.210248, "o", "\u001b[?25l\u001b[30m\u001b[42m\r\n[1] 0:vi  1:bash- 2:ssh* 3:ssh                                                                        \"master\" 12:49 28-Apr-25\u001b(B\u001b[m\u001b[37;1H\u001b[?12l\u001b[?25h"]
[407.71887, "o", "\u001b[?25l\u001b[Hcilium-operator-6db76fc8fc-ktkgh   1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[2;1Hcilium-tgz2j                       1/1     Running   0              62s   10.29.45.83    worker1-dpu   <none>           <none>\u001b[3;1Hcilium-zhlz8                       1/1     Running   0              62s   10.29.45.6     worker2-dpu   <none>           <none>\u001b[4;1Hroot@master:/usr/lib/go-1.23/src/cni-offload# # Check encryption status^C\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# # Check encryption status\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@m"]
[407.719093, "o", "aster:/usr/lib/go-1.23/src/cni-offload# kubectl exec -it -n kube-system cilium-zhlz8 -- cilium encrypt status\u001b[K\r\nDefaulted container \"cilium-agent\" out of: cilium-agent, config (init), mount-cgroup (init), apply-sysctl-overwrites (init), mount-bpf-fs (init), clean-cilium-state (init), install-cni-binaries (init)\u001b[K\r\nEncryption: IPsec                     \u001b[K\r\nDecryption interface(s): \u001b[K\r\nKeys in use: 1                         \u001b[K\r\nMax Seq. Number: N/A\u001b[K\r\nErrors: 0                         \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# # Create starwars demo\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml \u001b[K\r\nservice/deathstar created\u001b[K\r\ndeployment.apps/deathstar created\u001b[K\r\npod/tiefighter created\u001b[K\r\npod/xwing created\u001b[K\r\nroot@master:/u"]
[407.719243, "o", "sr/lib/go-1.23/src/cni-offload# \u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# kubectl exec tiefighter -- curl -s -XPOST deathstar.default.svc.cluster.local/v1\u001b[35;1H/request-landing\u001b[K\r\nShip landed\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi  1:bash* 2:ssh- 3:ssh                                                                        \"master\" 12:49 28-Apr-25\u001b(B\u001b[m\u001b[37;47H\u001b[?12l\u001b[?25h"]
[408.936816, "o", "\r\u001b[24P(reverse-i-search)`':\u001b[C"]
[409.226634, "o", "\u001b[3Dc': kubectl exec tiefighter -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\u001b[22D"]
[409.347669, "o", "\u001b[21G\u001b[1@u\u001b[30C"]
[409.623677, "o", "\u001b[22G\u001b[1@r\u001b[30C"]
[409.736521, "o", "\u001b[23G\u001b[1@l\u001b[30C"]
[410.804784, "o", "\u001b[14D\u001b[5Pxwing\u001b[4C"]
[411.353555, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[Aroot@master:/usr/lib/go-1.23/src/cni-offload# kubectl exec xwing -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\r\n\u001b[1;38r\u001b[37;1H"]
[411.54846, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[AShip landed\u001b[1;38r\u001b[37;1H"]
[411.556057, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[412.876438, "o", "\u001b[?25l\u001b[HIP 10.0.3.31.4240 > worker1-dpu.40408: Flags [.], ack 1, win 505, options [nop,nop,TS val 3903385570 ecr 63129787], length 0\u001b[K\r\n12:48:36.461958 IP 10.29.45.6.54512 > hyd11153-dpu.4240: Flags [.], ack 76, win 502, options [nop,nop,TS val 1376220264 ecr 1038221134], length 0\u001b[K\r\n12:48:36.462027 IP 10.29.45.6.58223 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 6\u001b[K\r\nIP 10.0.3.208.36994 > 10.0.4.27.4240: Flags [.], ack 76, win 511, options [nop,nop,TS val 2151496130 ecr 1053573332], length 0\u001b[6;1H12:48:50.862638 IP 10.29.45.6.59682 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 4\u001b[K\r\nIP 10.0.3.31 > worker1-dpu: ICMP echo reply, id 43758, seq 1968, length 24\u001b[K\r\n12:48:50.862655 IP 10.29.45.6 > hyd11153-dpu: ICMP echo reply, id 43758, seq 1968, length 24\u001b[K\r\n12:48:50.868409 IP 10.29.45.6.4240 > hyd11153-dpu.47064: Flags [P.], seq 1:76, ack 102, win 509, options [nop,nop,TS val 1376234671 ecr 1038250688], length 75\u001b[K\r\n12:48:50.868811 IP 10.29.45.6.40646 > hyd11153-dpu.84"]
[412.876475, "o", "72: OTV, flags [I] (0x08), overlay 0, instance 4\u001b[K\r\nIP 10.0.3.31.4240 > worker1-dpu.40408: Flags [P.], seq 1:76, ack 101, win 505, options [nop,nop,TS val 3903400123 ecr 63159448], length 75\u001b[K\r\n12:48:51.569961 IP 10.29.45.6.54512 > hyd11153-dpu.4240: Flags [.], ack 76, win 502, options [nop,nop,TS val 1376235372 ecr 1038221134], length 0\u001b[K\r\n12:48:51.570025 IP 10.29.45.6.58223 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 6\u001b[K\r\nIP 10.0.3.208.36994 > 10.0.4.27.4240: Flags [.], ack 76, win 511, options [nop,nop,TS val 2151511238 ecr 1053573332], length 0\u001b[18;1H12:48:51.671295 IP 10.29.45.6.54512 > hyd11153-dpu.4240: Flags [.], ack 76, win 502, options [nop,nop,TS val 1376235474 ecr 1038221134], length 0\u001b[K\r\n12:48:51.671312 IP 10.29.45.6.58223 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 6\u001b[K\r\nIP 10.0.3.208.36994 > 10.0.4.27.4240: Flags [.], ack 76, win 511, options [nop,nop,TS val 2151511340 ecr 1053573332], length 0\u001b[22;1H\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n12:49:04.654643"]
[412.876585, "o", " IP 10.29.45.6.54445 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 59545\u001b[K\r\nIP 10.0.3.208 > worker1-dpu: ESP(spi=0x00000006,seq=0x1), length 136\u001b[K\r\n12:49:04.654706 IP 10.29.45.6.54445 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 59545\u001b[K\r\nIP 10.0.3.208 > worker1-dpu: ESP(spi=0x00000006,seq=0x2), length 136\u001b[K\r\n12:49:04.669493 IP 10.29.45.6.40731 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 59545\u001b[K\r\nIP 10.0.3.208 > worker1-dpu: ESP(spi=0x00000006,seq=0x3), length 128\u001b[K\r\n12:49:04.669543 IP 10.29.45.6.40731 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 59545\u001b[K\r\nIP 10.0.3.208 > worker1-dpu: ESP(spi=0x00000006,seq=0x4), length 128\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi  1:bash- 2:ssh* 3:ssh                                                                        \"master\" 12:49 28-Apr-25\u001b(B\u001b[m\u001b[37;1H\u001b[?12l\u001b[?25h"]
[412.882323, "o", "\u001b[1;37r\u001b[4S\u001b[33d12:49:06.007220 IP 10.29.45.6.4240 > hyd11153-dpu.47064: Flags [.], ack 102, win 509, options [nop,nop,TS val 1376249810 ecr 1038250688], length 0\r\n12:49:06.007255 IP 10.29.45.6.40646 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 4\r\nIP 10.0.3.31.4240 > worker1-dpu.40408: Flags [.], ack 101, win 505, options [nop,nop,TS val 3903415262 ecr 63159448], length 0\u001b[36;1H\u001b[1;38r\u001b[37;1H"]
[413.545467, "o", "\u001b[1;37r\u001b[2S\u001b[35d12:49:06.669955 IP 10.29.45.6.54512 > hyd11153-dpu.4240: Flags [.], ack 76, win 502, options [nop,nop,TS val 1376250472 ecr 1038251491], length 0\u001b[1;38r\u001b[37;1H\u001b[1;37r\u001b[2S\u001b[35d12:49:06.670021 IP 10.29.45.6.58223 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 6\r\nIP 10.0.3.208.36994 > 10.0.4.27.4240: Flags [.], ack 76, win 511, options [nop,nop,TS val 2151526338 ecr 1053603690], length 0\u001b[36;1H\u001b[1;38r\u001b[37;1H"]
[414.701639, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[415.184027, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[416.398375, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[418.01972, "o", "\u001b[1;37r\u001b[5S\u001b[32d^C\r\n30 packets captured\r\n30 packets received by filter\r\n0 packets dropped by kernel\r\n3 packets dropped by interface\u001b[1;38r\u001b[37;1H"]
[418.065017, "o", "root@worker1-dpu:~# "]
[419.843762, "o", "\u001b[?25l\u001b[H![CNI-Offload policies](deployments/images/cni-offload-policies.png)\u001b[K\r\n\u001b[K\r\n```Application running demo```\u001b[K\r\n\u001b[K\r\n[<img src=\"deployments/images/cni-offload-nodes.png\" style=\"width:400px;\"/>](doc/guides/_static/demo/CNI_Offload.html)\u001b[K\r\n\u001b[K\r\n#### Testing IPsec Transparent Encryption\u001b[K\r\n\u001b[K\r\nOn Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\necho 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[K\r\n\u001b[K\r\n# Deploy Cilium with IPSec\u001b[K\r\n1. make deploy-ipsec\u001b[K\r\n\u001b[K\r\n# Check encryption status\u001b[K\r\n2. cilium encrypt status\u001b[K\r\n\u001b[K\r\n# Start tcpdump in dpu\u001b[K\r\n3. ssh root@<dpu-ip> tcpdump -i eth0\u001b[K\r\n\u001b[K\r\n# Create starwars demo\u001b[K\r\n4. kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml\u001b[K\r\n\u001b[K\r\n# Post http request to create traffic\u001b[K\r\n5. kubectl exec xwing -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\u001b[K\r\n\u001b[K\r\n# Check tcpdump for ESP packet\u001b[K\r\n16:10:30.388280 IP (tos 0x0, ttl 64, id 50931, offset 0, flags [none], proto UDP ("]
[419.843858, "o", "17), length 1498)\u001b[K\r\n    10.29.45.6.58060 > 10.29.45.83.8472: [no cksum] OTV, flags [I] (0x08), overlay 0, instance 29048\u001b[K\r\nIP (tos 0x0, ttl 64, id 5, offset 0, flags [DF], proto ESP (50), length 1448)\u001b[K\r\n    10.0.3.208 > 10.0.4.145: ESP(spi=0x00000006,seq=0x2e83614), length 1428\u001b[K\r\n\u001b[K\r\n# Check CPT instruction counter\u001b[K\r\n6. cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\n\u001b[K\r\nCPT instruction requests   45\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi* 1:bash  2:ssh- 3:ssh                                                                        \"master\" 12:49 28-Apr-25\u001b(B\u001b[m\u001b[36;1H\u001b[?12l\u001b[?25h"]
[429.446451, "o", "\u001b[?25l\u001b[HIP 10.0.3.208.36994 > 10.0.4.27.4240: Flags [.], ack 76, win 511, options [nop,nop,TS val 2151511238 ecr 1053573332], length 0\u001b[2;1H12:48:51.671295 IP 10.29.45.6.54512 > hyd11153-dpu.4240: Flags [.], ack 76, win 502, options [nop,nop,TS val 1376235474 ecr 1038221134], length 0\u001b[K\r\n12:48:51.671312 IP 10.29.45.6.58223 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 6\u001b[K\r\nIP 10.0.3.208.36994 > 10.0.4.27.4240: Flags [.], ack 76, win 511, options [nop,nop,TS val 2151511340 ecr 1053573332], length 0\u001b[6;1H\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n12:49:04.654643 IP 10.29.45.6.54445 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 59545\u001b[K\r\nIP 10.0.3.208 > worker1-dpu: ESP(spi=0x00000006,seq=0x1), length 136\u001b[K\r\n12:49:04.654706 IP 10.29.45.6.54445 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 59545\u001b[K\r\nIP 10.0.3.208 > worker1-dpu: ESP(spi=0x00000006,seq=0x2), length 136\u001b[K\r\n12:49:04.669493 IP 10.29.45.6.40731 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, ins"]
[429.446773, "o", "tance 59545\u001b[K\r\nIP 10.0.3.208 > worker1-dpu: ESP(spi=0x00000006,seq=0x3), length 128\u001b[K\r\n12:49:04.669543 IP 10.29.45.6.40731 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 59545\u001b[K\r\nIP 10.0.3.208 > worker1-dpu: ESP(spi=0x00000006,seq=0x4), length 128\u001b[K\r\n12:49:06.007220 IP 10.29.45.6.4240 > hyd11153-dpu.47064: Flags [.], ack 102, win 509, options [nop,nop,TS val 1376249810 ecr 1038250688], length 0\u001b[K\r\n12:49:06.007255 IP 10.29.45.6.40646 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 4\u001b[K\r\nIP 10.0.3.31.4240 > worker1-dpu.40408: Flags [.], ack 101, win 505, options [nop,nop,TS val 3903415262 ecr 63159448], length 0\u001b[25;1H12:49:06.669955 IP 10.29.45.6.54512 > hyd11153-dpu.4240: Flags [.], ack 76, win 502, options [nop,nop,TS val 1376250472 ecr 1038251491], length 0\u001b[K\r\n12:49:06.670021 IP 10.29.45.6.58223 > hyd11153-dpu.8472: OTV, flags [I] (0x08), overlay 0, instance 6\u001b[K\r\nIP 10.0.3.208.36994 > 10.0.4.27.4240: Flags [.], ack 76, win 511, options [nop,nop,TS val 2151526338 ecr 1"]
[429.446964, "o", "053603690], length 0\u001b[29;1H\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n^C\u001b[K\r\n30 packets captured\u001b[K\r\n30 packets received by filter\u001b[K\r\n0 packets dropped by kernel\u001b[K\r\n3 packets dropped by interface\u001b[K\r\nroot@worker1-dpu:~# \u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash  2:ssh* 3:ssh                                                                        \"master\" 12:49 28-Apr-25\u001b(B\u001b[m\u001b[37;21H\u001b[?12l\u001b[?25h"]
[430.202061, "o", "# Check tcpdump for ESP packet"]
[431.171585, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[431.554623, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[431.815061, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[432.066532, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[432.701615, "o", "# Check tcpdump for ESP packet"]
[433.146641, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[433.430043, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[433.67227, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[433.86734, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[444.482832, "o", "#"]
[444.990768, "o", " "]
[445.529712, "o", "IP 10.0.3.208 > worker1-dpu: ESP(spi=0x00000006,seq=0x4), length 128"]
[446.329117, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[446.884045, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[447.452661, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker1-dpu:~# \u001b[1;38r\u001b[37;21H"]
[450.549848, "o", "\u001b[?25l\u001b[H![CNI-Offload policies](deployments/images/cni-offload-policies.png)\u001b[K\r\n\u001b[K\r\n```Application running demo```\u001b[K\r\n\u001b[K\r\n[<img src=\"deployments/images/cni-offload-nodes.png\" style=\"width:400px;\"/>](doc/guides/_static/demo/CNI_Offload.html)\u001b[K\r\n\u001b[K\r\n#### Testing IPsec Transparent Encryption\u001b[K\r\n\u001b[K\r\nOn Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\necho 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[K\r\n\u001b[K\r\n# Deploy Cilium with IPSec\u001b[K\r\n1. make deploy-ipsec\u001b[K\r\n\u001b[K\r\n# Check encryption status\u001b[K\r\n2. cilium encrypt status\u001b[K\r\n\u001b[K\r\n# Start tcpdump in dpu\u001b[K\r\n3. ssh root@<dpu-ip> tcpdump -i eth0\u001b[K\r\n\u001b[K\r\n# Create starwars demo\u001b[K\r\n4. kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml\u001b[K\r\n\u001b[K\r\n# Post http request to create traffic\u001b[K\r\n5. kubectl exec xwing -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\u001b[K\r\n\u001b[K\r\n# Check tcpdump for ESP packet\u001b[K\r\n16:10:30.388280 IP (tos 0x0, ttl 64, id 50931, offset 0, flags [none], proto UDP ("]
[450.550005, "o", "17), length 1498)\u001b[K\r\n    10.29.45.6.58060 > 10.29.45.83.8472: [no cksum] OTV, flags [I] (0x08), overlay 0, instance 29048\u001b[K\r\nIP (tos 0x0, ttl 64, id 5, offset 0, flags [DF], proto ESP (50), length 1448)\u001b[K\r\n    10.0.3.208 > 10.0.4.145: ESP(spi=0x00000006,seq=0x2e83614), length 1428\u001b[K\r\n\u001b[K\r\n# Check CPT instruction counter\u001b[K\r\n6. cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\n\u001b[K\r\nCPT instruction requests   45\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi* 1:bash  2:ssh- 3:ssh                                                                        \"master\" 12:49 28-Apr-25\u001b(B\u001b[m\u001b[36;1H\u001b[?12l\u001b[?25h"]
[458.695529, "o", "\u001b[?25l\u001b[H-bash: /root/.bash_profile: line 3: unexpected EOF while looking for matching `\"'\u001b[K\r\n-bash: /root/.bash_profile: line 5: syntax error: unexpected end of file\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# ssh root@10.29.45.6\u001b[K\r\nroot@10.29.45.6's password: \u001b[K\r\nWelcome to Ubuntu 20.04.6 LTS (GNU/Linux 6.1.67-00024-g4fb36c321953 aarch64)\u001b[K\r\n\u001b[K\r\n * Documentation:  https://help.ubuntu.com\u001b[K\r\n * Management:     https://landscape.canonical.com\u001b[K\r\n * Support:        https://ubuntu.com/pro\u001b[K\r\n\u001b[K\r\nThis system has been minimized by removing packages and content that are\u001b[K\r\nnot required on a system that users do not log into.\u001b[K\r\n\u001b[K\r\nTo restore this content, you can run the 'unminimize' command.\u001b[K\r\nLast login: Mon Apr 28 12:22:22 2025\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# # On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\nroot@worker2-dpu:~# echo 1 > /sys/bus/pci/devices/0002\\"]
[458.695572, "o", ":20\\:00.0/sriov_numvfs\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# # Check CPT instruction counter\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\nCPT instruction requests   23\u001b[K\r\nCPT instruction latency    117784\u001b[K\r\nCPT NCB read requests      1790\u001b[K\r\nCPT NCB read latency       338483\u001b[K\r\nCPT read requests caused by UC fills   1648\u001b[K\r\nCPT active cycles pc       3369281\u001b[K\r\nCPT clock count pc         42287393169\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash  2:ssh  3:ssh*                                                                       \"master\" 12:49 28-Apr-25\u001b(B\u001b[m\u001b[36;21H\u001b[?12l\u001b[?25h"]
[459.693623, "o", "# Check CPT instruction counter"]
[460.243633, "o", "\r\nroot@worker2-dpu:~# "]
[460.570647, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker2-dpu:~# \u001b[1;38r\u001b[37;21H"]
[460.81253, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker2-dpu:~# \u001b[1;38r\u001b[37;21H"]
[461.727193, "o", "# Check CPT instruction counter"]
[462.097176, "o", "\u001b[21Gcat /sys/kernel/debug/cn10k/cpt/cpt_pc"]
[463.557581, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1H"]
[463.558315, "o", "\u001b[1;37r\u001b[7S\u001b[30dCPT instruction requests   47\r\nCPT instruction latency    243061\r\nCPT NCB read requests      1970\r\nCPT NCB read latency       392277\r\nCPT read requests caused by UC fills   1648\r\nCPT active cycles pc       4491060\r\nCPT clock count pc         52395209408\u001b[1;38r\u001b[37;1H"]
[463.558444, "o", "root@worker2-dpu:~# "]
[469.017556, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[1;38r\u001b[37;1Hroot@worker2-dpu:~# "]
[469.259449, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker2-dpu:~# \u001b[1;38r\u001b[37;21H"]
[469.992782, "o", "#"]
[470.443634, "o", " "]
[470.62315, "o", "\u001b[?25l\u001b[30m\u001b[42m\r\n[1] 0:vi- 1:bash  2:ssh  3:ssh*                                                                       \"master\" 12:50 28-Apr-25\u001b(B\u001b[m\u001b[37;23H\u001b[?12l\u001b[?25h"]
[470.996018, "o", "CPT instruction requests   47"]
[471.653281, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker2-dpu:~# \u001b[1;38r\u001b[37;21H"]
[471.96481, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker2-dpu:~# \u001b[1;38r\u001b[37;21H"]
[472.199526, "o", "\u001b[1;37r\u001b[37;1H\nroot@worker2-dpu:~# \u001b[1;38r\u001b[37;21H"]
[476.758832, "o", "\u001b[?25l\u001b[H![CNI-Offload policies](deployments/images/cni-offload-policies.png)\u001b[K\r\n\u001b[K\r\n```Application running demo```\u001b[K\r\n\u001b[K\r\n[<img src=\"deployments/images/cni-offload-nodes.png\" style=\"width:400px;\"/>](doc/guides/_static/demo/CNI_Offload.html)\u001b[K\r\n\u001b[K\r\n#### Testing IPsec Transparent Encryption\u001b[K\r\n\u001b[K\r\nOn Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\necho 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[K\r\n\u001b[K\r\n# Deploy Cilium with IPSec\u001b[K\r\n1. make deploy-ipsec\u001b[K\r\n\u001b[K\r\n# Check encryption status\u001b[K\r\n2. cilium encrypt status\u001b[K\r\n\u001b[K\r\n# Start tcpdump in dpu\u001b[K\r\n3. ssh root@<dpu-ip> tcpdump -i eth0\u001b[K\r\n\u001b[K\r\n# Create starwars demo\u001b[K\r\n4. kubectl apply -f build/cilium/examples/minikube/http-sw-app.yaml\u001b[K\r\n\u001b[K\r\n# Post http request to create traffic\u001b[K\r\n5. kubectl exec xwing -- curl -s -XPOST deathstar.default.svc.cluster.local/v1/request-landing\u001b[K\r\n\u001b[K\r\n# Check tcpdump for ESP packet\u001b[K\r\n16:10:30.388280 IP (tos 0x0, ttl 64, id 50931, offset 0, flags [none], proto UDP ("]
[476.758906, "o", "17), length 1498)\u001b[K\r\n    10.29.45.6.58060 > 10.29.45.83.8472: [no cksum] OTV, flags [I] (0x08), overlay 0, instance 29048\u001b[K\r\nIP (tos 0x0, ttl 64, id 5, offset 0, flags [DF], proto ESP (50), length 1448)\u001b[K\r\n    10.0.3.208 > 10.0.4.145: ESP(spi=0x00000006,seq=0x2e83614), length 1428\u001b[K\r\n\u001b[K\r\n# Check CPT instruction counter\u001b[K\r\n6. cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\n\u001b[K\r\nCPT instruction requests   45\u001b[K\r\n\u001b[K\u001b[30m\u001b[42m\r\n[1] 0:vi* 1:bash  2:ssh  3:ssh-                                                                       \"master\" 12:50 28-Apr-25\u001b(B\u001b[m\u001b[36;1H\u001b[?12l\u001b[?25h"]
[478.304766, "o", "\r\n:"]
[478.559135, "o", "q"]
[478.766139, "o", "\r\u001b[K"]
[478.766273, "o", "\u001b[?25l\u001b[Hroot@master:/usr/lib/go-1.23/src/cni-offload# vi README.md \u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\r\n\u001b[K\u001b[2d\u001b[?12l\u001b[?25h"]
[478.766688, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[480.545841, "o", "\u001b[?25l\u001b[30m\u001b[42m\u001b[38;1H[1] 0:bash* 1:bash  2:ssh  3:ssh-                                                                     \"master\" 12:50 28-Apr-25\u001b(B\u001b[m\u001b[2;47H\u001b[?12l\u001b[?25h"]
[480.546408, "o", "logout\r\n"]
[480.552286, "o", "\u001b[?25l\u001b[Hroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# # On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\nroot@worker2-dpu:~# echo 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# # Check CPT instruction counter\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\nCPT instruction requests   23\u001b[K\r\nCPT instruction latency    117784\u001b[K\r\nCPT NCB read requests      1790\u001b[K\r\nCPT NCB read latency       338483\u001b[K\r\nCPT read requests caused by UC fills   1648\u001b[K\r\nCPT active cycles pc       3369281\u001b[K\r\nCPT clock count pc         42287393169\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# # Check CPT instruction counter\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\nCPT instruction requests   47\u001b[K\r\nCP"]
[480.552426, "o", "T instruction latency    243061\u001b[K\r\nCPT NCB read requests      1970\u001b[K\r\nCPT NCB read latency       392277\u001b[K\r\nCPT read requests caused by UC fills   1648\u001b[K\r\nCPT active cycles pc       4491060\u001b[K\r\nCPT clock count pc         52395209408\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# # CPT instruction requests   47\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\u001b[30m\u001b[42m\r\n[1] 1:bash  2:ssh- 3:ssh*                                                                             \"master\" 12:50 28-Apr-25\u001b(B\u001b[m\u001b[37;21H\u001b[?12l\u001b[?25h"]
[481.959512, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[36;21Hlogout\u001b[1;38r\u001b[37;1H"]
[481.964797, "o", "\u001b[1;37r\u001b[37;1H\n\u001b[AConnection to 10.29.45.6 closed.\u001b[1;38r\u001b[37;1H"]
[481.966662, "o", "root@master:/usr/lib/go-1.23/src/cni-offload# "]
[485.626237, "o", "\u001b[?25l\u001b[30m\u001b[42m\r\n[1] 1:bash  2:ssh- 3:bash*                                                                            \"master\" 12:50 28-Apr-25\u001b(B\u001b[m\u001b[37;47H\u001b[?12l\u001b[?25h"]
[486.00715, "o", "\u001b[?25l\u001b[30m\u001b[43m\r\nCan't find window: 0                                                                                                          \u001b(B\u001b[m\u001b[37;47H"]
[486.759381, "o", "\u001b[Hroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# # On Octeon CN106, IPSec Look Aside Encryption can be enabled by creating a CPT VF:\u001b[K\r\nroot@worker2-dpu:~# echo 1 > /sys/bus/pci/devices/0002\\:20\\:00.0/sriov_numvfs\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# # Check CPT instruction counter\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\nCPT instruction requests   23\u001b[K\r\nCPT instruction latency    117784\u001b[K\r\nCPT NCB read requests      1790\u001b[K\r\nCPT NCB read latency       338483\u001b[K\r\nCPT read requests caused by UC fills   1648\u001b[K\r\nCPT active cycles pc       3369281\u001b[K\r\nCPT clock count pc         42287393169\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# # Check CPT instruction counter\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# cat /sys/kernel/debug/cn10k/cpt/cpt_pc\u001b[K\r\nCPT instruction requests   47\u001b[K\r\nCPT instruction latency    243061\u001b[K\r\nCPT NCB read request"]
[486.759589, "o", "s      1970\u001b[K\r\nCPT NCB read latency       392277\u001b[K\r\nCPT read requests caused by UC fills   1648\u001b[K\r\nCPT active cycles pc       4491060\u001b[K\r\nCPT clock count pc         52395209408\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# # CPT instruction requests   47\u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# \u001b[K\r\nroot@worker2-dpu:~# logout\u001b[K\r\nConnection to 10.29.45.6 closed.\u001b[K\r\nroot@master:/usr/lib/go-1.23/src/cni-offload# \u001b[K\u001b[30m\u001b[42m\r\n[1] 1:bash  2:ssh- 3:bash*                                                                            \"master\" 12:50 28-Apr-25\u001b(B\u001b[m\u001b[37;47H\u001b[?12l\u001b[?25h"]
[493.172358, "o", "\u001b[1;38r\u001b(B\u001b(B\u001b[m\u001b[?1l\u001b>\u001b[H\u001b[2J\u001b]112\u0007"]
[493.172564, "o", "\u001b[?12l\u001b[?25h\u001b[?1000l\u001b[?1002l\u001b[?1006l\u001b[?1005l\u001b[?1049l\u001b[23;0;0t"]
[493.172796, "o", "[detached (from session 1)]\r\n"]
[493.173477, "o", "\u001b]0;root@master: /usr/lib/go-1.23/src/cni-offload\u0007root@master:/usr/lib/go-1.23/src/cni-offload# "]
[495.288635, "o", "exit\r\n"]
